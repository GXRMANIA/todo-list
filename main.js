(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(e){t(1,arguments);var o=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===o?new Date(e.getTime()):"number"==typeof e||"[object Number]"===o?new Date(e):("string"!=typeof e&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function n(e){t(1,arguments);var n=o(e);return n.setHours(0,0,0,0),n}function i(e,o){t(2,arguments);var i=n(e),d=n(o);return i.getTime()===d.getTime()}function d(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}e.d({},{l:()=>T});var r={};function c(){return r}function a(e,n){var i,r,a,l,s,u,p,v;t(1,arguments);var m=c(),y=d(null!==(i=null!==(r=null!==(a=null!==(l=null==n?void 0:n.weekStartsOn)&&void 0!==l?l:null==n||null===(s=n.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==a?a:m.weekStartsOn)&&void 0!==r?r:null===(p=m.locale)||void 0===p||null===(v=p.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==i?i:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=o(e),T=f.getDay(),S=(T<y?7:0)+T-y;return f.setDate(f.getDate()-S),f.setHours(0,0,0,0),f}function l(e,o,n){t(2,arguments);var i=a(e,n),d=a(o,n);return i.getTime()===d.getTime()}const s=(()=>{const e=document.querySelector(".newTodoForm"),o=document.querySelector(".todos-container"),n=document.querySelector(".editTodoContainer"),d=document.querySelector("#content"),r=document.querySelector(".navProjects"),c=document.querySelector(".navHome"),a=document.querySelector(".navToday"),s=document.querySelector(".navWeek");function u(){e.childNodes.forEach((e=>{"text"===e.type&&(e.value="")})),e.classList.add("inactive")}function p(){n.innerHTML=""}function v(){u(),p(),o.innerHTML="",d.innerHTML=""}return{loadWeek:function(e){s.classList.add("selected"),a.classList.remove("selected"),c.classList.remove("selected"),r.classList.remove("selected"),v();let n=0,i=e.filter((e=>{if(function(e,o){return t(1,arguments),l(e,Date.now(),o)}(Date.parse(e.dueDate)))return e}));i.forEach((e=>{o.innerHTML+=`\n            <div class="todo" data-id="${n}">\n                <p>${e.title}</p>\n                <p>Due: ${e.dueDate}</p>\n                <div>\n                    <input type="button" value="Edit" class="editTodoBtn">\n                    <input type="button" value="Delete" class="deleteTodoBtn">\n                </div>\n            </div>\n            `,n++}))},loadToday:function(e){a.classList.add("selected"),c.classList.remove("selected"),s.classList.remove("selected"),r.classList.remove("selected"),v();let n=0,d=e.filter((e=>{if(function(e){return t(1,arguments),i(e,Date.now())}(Date.parse(e.dueDate)))return e}));d.forEach((e=>{o.innerHTML+=`\n            <div class="todo" data-id="${n}">\n                <p>${e.title}</p>\n                <p>Due: ${e.dueDate}</p>\n                <div>\n                    <input type="button" value="Edit" class="editTodoBtn">\n                    <input type="button" value="Delete" class="deleteTodoBtn">\n                </div>\n            </div>\n            `,n++}))},loadProjectsPage:function(e){r.classList.add("selected"),a.classList.remove("selected"),c.classList.remove("selected"),s.classList.remove("selected"),v();const t=e.map((e=>e.project));[...new Set(t)].forEach((t=>{let o=e.filter((e=>{if(e.project===t)return e}));const n=document.createElement("div");n.classList.add("projectContainer");const i=document.createElement("div");i.textContent=t,n.appendChild(i),o.forEach((e=>{const t=document.createElement("li");t.textContent=e.title,t.classList.add("projectTodos"),n.appendChild(t)})),d.appendChild(n)}))},clearScreen:v,openNewTodoForm:function(){e.classList.remove("inactive"),n.innerHTML="",o.innerHTML=""},closeNewTodoForm:u,loadHome:function(e){c.classList.add("selected"),a.classList.remove("selected"),s.classList.remove("selected"),r.classList.remove("selected"),v();let t=0;e.forEach((e=>{o.innerHTML+=`\n            <div class="todo" data-id="${t}">\n                <p>${e.title}</p>\n                <p>Due: ${e.dueDate}</p>\n                <div>\n                    <input type="button" value="Edit" class="editTodoBtn">\n                    <input type="button" value="Delete" class="deleteTodoBtn">\n                </div>\n            </div>\n            `,t++}))},openEditTodo:function(e,t){o.innerHTML="",u(),n.innerHTML=`\n            <div class="editTodo" data-id="${t}">\n                <input type="text" value="${e.title}" class="editTitleInput">\n                <input type="text" value="${e.description}" class="editDescriptionInput">\n                <input type="date" value="${e.dueDate}" class="editDueDateInput"> \n                <select name="priority" id="priority" class="editPriorityInput">\n                    <option ${"low"==e.priority?"selected":""} value="low">Low</option>\n                    <option ${"mid"==e.priority?"selected":""} value="mid">Mid</option>\n                    <option ${"high"==e.priority?"selected":""} value="high">High</option>\n                </select>\n                <input type="text" value="${e.project}" class="editProjectInput">\n                <input type="button" value="Save" class="saveEditBtn">\n                <input type="button" value="Cancel" class="cancelEditBtn">\n            </div>\n            `},closeEditTodo:p}})(),u=function(e){const t=e.target.classList[0];"addBookBtn"===t?T.addTodo():"closeTodoForm"===t&&s.closeNewTodoForm()},p=function(e){const t=e.target.classList[0];let o=e.target.parentNode.parentNode.dataset.id;"deleteTodoBtn"===t?T.deleteTodo(o):"editTodoBtn"===t&&T.editTodo(o)},v=function(e){let t=e.target.parentNode.dataset.id;const o=e.target.classList[0];if("cancelEditBtn"===o)T.cancelEditTodo();else if("saveEditBtn"===o){const e=document.querySelector(".editTitleInput").value,o=document.querySelector(".editDescriptionInput").value,n=document.querySelector(".editDueDateInput").value,i=document.querySelector(".editPriorityInput").value,d=document.querySelector(".editProjectInput").value;T.saveEditTodo(t,e,o,n,i,d)}},m=function(e){localStorage.setItem("todos",JSON.stringify(e))},y=function(){let e=[];return JSON.parse(localStorage.getItem("todos")).forEach((t=>{let o=new f(t.title,t.description,t.dueDate,t.priority,t.project);e.push(o)})),e};function f(e,t,o,n,i){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.project=i}f.prototype.updateTodo=function(e,t,o,n,i){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.project=i};const T=(()=>{let e=[];const t=document.querySelector(".newBookBtn"),o=document.querySelector(".newTodoForm"),n=document.querySelector(".todos-container"),i=document.querySelector(".editTodoContainer"),d=document.querySelector("#title"),r=document.querySelector("#description"),c=document.querySelector("#duedate"),a=document.querySelector("#priority"),l=document.querySelector("#project"),T=document.querySelector(".navProjects"),S=document.querySelector(".navHome"),L=document.querySelector(".navToday"),h=document.querySelector(".navWeek");return t.addEventListener("click",s.openNewTodoForm),o.addEventListener("click",u),n.addEventListener("click",p),i.addEventListener("click",v),T.addEventListener("click",(()=>{s.loadProjectsPage(e)})),S.addEventListener("click",(()=>{s.loadHome(e)})),L.addEventListener("click",(()=>{s.loadToday(e)})),h.addEventListener("click",(()=>{s.loadWeek(e)})),e=y(),s.loadHome(e),{addTodo:function(){if(!d.value)return void alert("You have to fill in a title!");const t=new f(d.value,r.value,c.value,a.value,l.value);e.push(t),m(e),s.loadHome(e),s.closeNewTodoForm()},deleteTodo:function(t){e.splice(t,1),s.loadHome(e),m(e)},editTodo:function(t){s.openEditTodo(e[t],t)},cancelEditTodo:function(){s.closeEditTodo(),s.loadHome(e)},saveEditTodo:function(t,o,n,i,d,r){e[t].updateTodo(o,n,i,d,r),s.closeEditTodo(),s.loadHome(e),m(e)}}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sSUFFOUJmLEVBQVF3RixpQkFBaUIsU0FBUyxLQUM5QmhHLEVBQUdrRCxTQUFTM0IsRUFBTSxJQUV0QmQsRUFBU3VGLGlCQUFpQixTQUFVLEtBQ2hDaEcsRUFBR2tDLFVBQVVYLEVBQUssSUFFdEJiLEVBQVFzRixpQkFBaUIsU0FBUyxLQUM5QmhHLEVBQUdzQixTQUFTQyxFQUFLLElBMENqQkEsRUFBUWlELElBQ1J4RSxFQUFHa0QsU0FBUzNCLEdBUVQsQ0FBQ29DLFFBOUNSLFdBQ0ksSUFBSWdDLEVBQVczRSxNQUVYLFlBREFpRixNQUFNLGdDQUdWLE1BQU1qQixFQUFVLElBQUlDLEVBQUtVLEVBQVczRSxNQUFPNEUsRUFBaUI1RSxNQUFPNkUsRUFBYTdFLE1BQU84RSxFQUFjOUUsTUFBTytFLEVBQWEvRSxPQUN6SE8sRUFBTTJELEtBQUtGLEdBQ1hSLEVBQWtCakQsR0FDbEJ2QixFQUFHa0QsU0FBUzNCLEdBQ1p2QixFQUFHVyxrQkFDUCxFQW9DaUJvRCxXQWxDakIsU0FBb0J0QyxHQUNoQkYsRUFBTTJFLE9BQU96RSxFQUFPLEdBQ3BCekIsRUFBR2tELFNBQVMzQixHQUNaaUQsRUFBa0JqRCxFQUN0QixFQThCNkJ5QyxTQTVCN0IsU0FBa0J2QyxHQUNkekIsRUFBR21ELGFBQWE1QixFQUFNRSxHQUFRQSxFQUNsQyxFQTBCdUN3QyxlQXhCdkMsV0FDSWpFLEVBQUdtQixnQkFDSG5CLEVBQUdrRCxTQUFTM0IsRUFDaEIsRUFxQnVEZ0QsYUFsQnZELFNBQXNCOUMsRUFBTzRELEVBQVVDLEVBQWdCQyxFQUFZQyxFQUFhQyxHQUM1RWxFLEVBQU1FLEdBQU8yRCxXQUFXQyxFQUFVQyxFQUFnQkMsRUFBWUMsRUFBYUMsR0FDM0V6RixFQUFHbUIsZ0JBQ0huQixFQUFHa0QsU0FBUzNCLEdBQ1ppRCxFQUFrQmpELEVBRXRCLEVBY0gsRUExRmtCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZkRheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvVUkuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1RoaXNXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvYmluZEV2ZW50LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpOyAvLyBDbG9uZSB0aGUgZGF0ZVxuXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGFyZ3VtZW50ID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjc3RyaW5nLWFyZ3VtZW50c1wiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZkRheSBmcm9tIFwiLi4vc3RhcnRPZkRheS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgaXNTYW1lRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aClcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIDA2OjAwOjAwIGFuZCA0IFNlcHRlbWJlciAxODowMDowMCBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCwgNiwgMCksIG5ldyBEYXRlKDIwMTQsIDgsIDQsIDE4LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgYW5kIDQgT2N0b2JlciBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTQsIDksIDQpKVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIsIDIwMTQgYW5kIDQgU2VwdGVtYmVyLCAyMDE1IGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNSwgOCwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lRGF5KGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVMZWZ0KTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZVJpZ2h0KTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZkRheS5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZEYXkuZ2V0VGltZSgpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICBpZiAoZGlydHlOdW1iZXIgPT09IG51bGwgfHwgZGlydHlOdW1iZXIgPT09IHRydWUgfHwgZGlydHlOdW1iZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfVxuXG4gIHJldHVybiBudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcik7XG59IiwidmFyIGRlZmF1bHRPcHRpb25zID0ge307XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiBkZWZhdWx0T3B0aW9ucztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0T3B0aW9ucyhuZXdPcHRpb25zKSB7XG4gIGRlZmF1bHRPcHRpb25zID0gbmV3T3B0aW9ucztcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi4vX2xpYi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gU3VuIEF1ZyAzMSAyMDE0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRoZSB3ZWVrIHN0YXJ0cyBvbiBNb25kYXksIHRoZSBzdGFydCBvZiB0aGUgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICB2YXIgX3JlZiwgX3JlZjIsIF9yZWYzLCBfb3B0aW9ucyR3ZWVrU3RhcnRzT24sIF9vcHRpb25zJGxvY2FsZSwgX29wdGlvbnMkbG9jYWxlJG9wdGlvLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwsIF9kZWZhdWx0T3B0aW9ucyRsb2NhbDI7XG5cbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIHZhciB3ZWVrU3RhcnRzT24gPSB0b0ludGVnZXIoKF9yZWYgPSAoX3JlZjIgPSAoX3JlZjMgPSAoX29wdGlvbnMkd2Vla1N0YXJ0c09uID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX29wdGlvbnMkd2Vla1N0YXJ0c09uICE9PSB2b2lkIDAgPyBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUgPSBvcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlJG9wdGlvID0gX29wdGlvbnMkbG9jYWxlLm9wdGlvbnMpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZSRvcHRpbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkbG9jYWxlJG9wdGlvLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZjMgIT09IHZvaWQgMCA/IF9yZWYzIDogZGVmYXVsdE9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMiAhPT0gdm9pZCAwID8gX3JlZjIgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsID0gZGVmYXVsdE9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID0gX2RlZmF1bHRPcHRpb25zJGxvY2FsLm9wdGlvbnMpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmICE9PSB2b2lkIDAgPyBfcmVmIDogMCk7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMCBhbmQgNiBfYW5kXyBpcyBub3QgTmFOXG5cbiAgaWYgKCEod2Vla1N0YXJ0c09uID49IDAgJiYgd2Vla1N0YXJ0c09uIDw9IDYpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dlZWtTdGFydHNPbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNiBpbmNsdXNpdmVseScpO1xuICB9XG5cbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gIHZhciBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcbiAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gZGlmZik7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mV2VlayBmcm9tIFwiLi4vc3RhcnRPZldlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNTYW1lV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxXG4gKiB9KVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBKYW51YXJ5IDIwMTQgYW5kIDEgSmFudWFyeSAyMDE1IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVMZWZ0LCBvcHRpb25zKTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlUmlnaHQsIG9wdGlvbnMpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mV2Vlay5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZXZWVrLmdldFRpbWUoKTtcbn0iLCJpbXBvcnQgeyBhcHAgfSBmcm9tICcuL2luZGV4LmpzJ1xuaW1wb3J0IGlzVG9kYXkgZnJvbSAnZGF0ZS1mbnMvaXNUb2RheSdcbmltcG9ydCBpc1RoaXNXZWVrIGZyb20gJ2RhdGUtZm5zL2lzVGhpc1dlZWsnXG5cblxuXG5jb25zdCBVSSA9ICgoKSA9PiB7XG4gICAgXG4gICAgLy8gY2FjaGUgZG9tXG4gICAgY29uc3QgbmV3VG9kb0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1RvZG9Gb3JtXCIpXG4gICAgY29uc3QgdG9kb3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9zLWNvbnRhaW5lclwiKTtcbiAgICBjb25zdCBlZGl0VG9kb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdFRvZG9Db250YWluZXJcIilcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250ZW50XCIpO1xuXG4gICAgY29uc3QgbmF2UHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlByb2plY3RzXCIpO1xuICAgIGNvbnN0IG5hdkhvbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdkhvbWVcIik7XG4gICAgY29uc3QgbmF2VG9kYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlRvZGF5XCIpO1xuICAgIGNvbnN0IG5hdldlZWsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdldlZWtcIik7XG5cblxuICAgIGZ1bmN0aW9uIG9wZW5OZXdUb2RvRm9ybSgpIHtcbiAgICAgICAgbmV3VG9kb0Zvcm0uY2xhc3NMaXN0LnJlbW92ZShcImluYWN0aXZlXCIpO1xuICAgICAgICBlZGl0VG9kb0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB0b2Rvc0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlTmV3VG9kb0Zvcm0oKSB7XG4gICAgICAgIC8vIGNsZWFyIGlucHV0IGZpZWxkcyBhZnRlciBjbG9zaW5nXG4gICAgICAgIG5ld1RvZG9Gb3JtLmNoaWxkTm9kZXMuZm9yRWFjaCgoZWxlKSA9PiB7XG4gICAgICAgICAgICBpZihlbGUudHlwZSAhPT0gXCJ0ZXh0XCIpIHJldHVybjtcbiAgICAgICAgICAgIGVsZS52YWx1ZSA9IFwiXCI7XG4gICAgICAgIH0pXG4gICAgICAgIG5ld1RvZG9Gb3JtLmNsYXNzTGlzdC5hZGQoXCJpbmFjdGl2ZVwiKTsgXG4gICAgICAgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRIb21lKHRvZG9zKSB7XG4gICAgICAgIG5hdkhvbWUuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpXG4gICAgICAgIG5hdlRvZGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZXZWVrLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZQcm9qZWN0cy5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgY2xlYXJTY3JlZW4oKTtcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgdG9kb3MuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgICAgICAgIHRvZG9zQ29udGFpbmVyLmlubmVySFRNTCArPVxuICAgICAgICAgICAgYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZG9cIiBkYXRhLWlkPVwiJHtpbmRleH1cIj5cbiAgICAgICAgICAgICAgICA8cD4ke3RvZG8udGl0bGV9PC9wPlxuICAgICAgICAgICAgICAgIDxwPkR1ZTogJHt0b2RvLmR1ZURhdGV9PC9wPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJFZGl0XCIgY2xhc3M9XCJlZGl0VG9kb0J0blwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiRGVsZXRlXCIgY2xhc3M9XCJkZWxldGVUb2RvQnRuXCI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRUb2RheSh0b2Rvcykge1xuICAgICAgICBuYXZUb2RheS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2SG9tZS5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2V2Vlay5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2UHJvamVjdHMuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgICAgIGNsZWFyU2NyZWVuKCk7XG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGxldCB0b2RheVRvZG9zID0gdG9kb3MuZmlsdGVyKCh0b2RvKSA9PiB7XG4gICAgICAgICAgICBpZihpc1RvZGF5KERhdGUucGFyc2UodG9kby5kdWVEYXRlKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9kbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgdG9kYXlUb2Rvcy5mb3JFYWNoKHRvZG8gPT4ge1xuICAgICAgICAgICAgdG9kb3NDb250YWluZXIuaW5uZXJIVE1MICs9XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9kb1wiIGRhdGEtaWQ9XCIke2luZGV4fVwiPlxuICAgICAgICAgICAgICAgIDxwPiR7dG9kby50aXRsZX08L3A+XG4gICAgICAgICAgICAgICAgPHA+RHVlOiAke3RvZG8uZHVlRGF0ZX08L3A+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIkVkaXRcIiBjbGFzcz1cImVkaXRUb2RvQnRuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJEZWxldGVcIiBjbGFzcz1cImRlbGV0ZVRvZG9CdG5cIj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYFxuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkV2Vlayh0b2Rvcykge1xuICAgICAgICBuYXZXZWVrLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZUb2RheS5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2SG9tZS5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2UHJvamVjdHMuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgICAgIGNsZWFyU2NyZWVuKCk7XG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGxldCB3ZWVrVG9kb3MgPSB0b2Rvcy5maWx0ZXIoKHRvZG8pID0+IHtcbiAgICAgICAgICAgIGlmKGlzVGhpc1dlZWsoRGF0ZS5wYXJzZSh0b2RvLmR1ZURhdGUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2RvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICB3ZWVrVG9kb3MuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgICAgICAgIHRvZG9zQ29udGFpbmVyLmlubmVySFRNTCArPVxuICAgICAgICAgICAgYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZG9cIiBkYXRhLWlkPVwiJHtpbmRleH1cIj5cbiAgICAgICAgICAgICAgICA8cD4ke3RvZG8udGl0bGV9PC9wPlxuICAgICAgICAgICAgICAgIDxwPkR1ZTogJHt0b2RvLmR1ZURhdGV9PC9wPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJFZGl0XCIgY2xhc3M9XCJlZGl0VG9kb0J0blwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiRGVsZXRlXCIgY2xhc3M9XCJkZWxldGVUb2RvQnRuXCI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgIH0pO1xuXG4gICAgfSAgICAgXG5cbiAgICBmdW5jdGlvbiBoaWRlVG9kb3MoKSB7XG4gICAgICAgIHRvZG9zQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb3BlbkVkaXRUb2RvKHRvZG8sIGluZGV4KSB7XG4gICAgICAgIHRvZG9zQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGNsb3NlTmV3VG9kb0Zvcm0oKTtcbiAgICAgICAgZWRpdFRvZG9Db250YWluZXIuaW5uZXJIVE1MID0gXG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZWRpdFRvZG9cIiBkYXRhLWlkPVwiJHtpbmRleH1cIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIiR7dG9kby50aXRsZX1cIiBjbGFzcz1cImVkaXRUaXRsZUlucHV0XCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIke3RvZG8uZGVzY3JpcHRpb259XCIgY2xhc3M9XCJlZGl0RGVzY3JpcHRpb25JbnB1dFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIHZhbHVlPVwiJHt0b2RvLmR1ZURhdGV9XCIgY2xhc3M9XCJlZGl0RHVlRGF0ZUlucHV0XCI+IFxuICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cInByaW9yaXR5XCIgaWQ9XCJwcmlvcml0eVwiIGNsYXNzPVwiZWRpdFByaW9yaXR5SW5wdXRcIj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAkeyh0b2RvLnByaW9yaXR5ID09IFwibG93XCIpID8gXCJzZWxlY3RlZFwiIDogXCJcIn0gdmFsdWU9XCJsb3dcIj5Mb3c8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAkeyh0b2RvLnByaW9yaXR5ID09IFwibWlkXCIpID8gXCJzZWxlY3RlZFwiIDogXCJcIn0gdmFsdWU9XCJtaWRcIj5NaWQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiAkeyh0b2RvLnByaW9yaXR5ID09IFwiaGlnaFwiKSA/IFwic2VsZWN0ZWRcIiA6IFwiXCJ9IHZhbHVlPVwiaGlnaFwiPkhpZ2g8L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIiR7dG9kby5wcm9qZWN0fVwiIGNsYXNzPVwiZWRpdFByb2plY3RJbnB1dFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJTYXZlXCIgY2xhc3M9XCJzYXZlRWRpdEJ0blwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJDYW5jZWxcIiBjbGFzcz1cImNhbmNlbEVkaXRCdG5cIj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlRWRpdFRvZG8oKSB7XG4gICAgICAgIGVkaXRUb2RvQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFByb2plY3RzUGFnZSh0b2Rvcykge1xuICAgICAgICBuYXZQcm9qZWN0cy5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2VG9kYXkuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgICAgIG5hdkhvbWUuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgICAgIG5hdldlZWsuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgICAgIGNsZWFyU2NyZWVuKCk7ICAgXG4gICAgICAgIGxldCB0b2Rvc1dpdGhTYW1lUHJvamVjdDtcblxuICAgICAgICBjb25zdCBwcm9qZWN0TmFtZXMgPSB0b2Rvcy5tYXAoKHRvZG8pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0b2RvLnByb2plY3Q7XG4gICAgICAgIH0pXG5cbiAgICAgICAgbGV0IHVuaXFQcm9qZXRzID0gWy4uLm5ldyBTZXQocHJvamVjdE5hbWVzKV07XG5cbiAgICAgICAgdW5pcVByb2pldHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgICAgIGxldCB0b2Rvc1dpdGhTYW1lUHJvamVjdCA9IHRvZG9zLmZpbHRlcih0b2RvID0+IHtcbiAgICAgICAgICAgICAgICBpZih0b2RvLnByb2plY3QgPT09IHByb2plY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvZG9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHByb2plY3RDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInByb2plY3RDb250YWluZXJcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0O1xuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0VGl0bGUpXG5cbiAgICAgICAgICAgIHRvZG9zV2l0aFNhbWVQcm9qZWN0LmZvckVhY2godG9kbyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvamVjdFRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICAgICAgcHJvamVjdFRvZG8udGV4dENvbnRlbnQgPSB0b2RvLnRpdGxlO1xuICAgICAgICAgICAgICAgIHByb2plY3RUb2RvLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0VG9kb3NcIilcbiAgICAgICAgICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RUb2RvKVxuICAgICAgICAgICAgfSkgXG5cbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocHJvamVjdENvbnRhaW5lcilcbiAgICAgICAgfSlcblxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gY2xlYXJTY3JlZW4oKSB7XG4gICAgICAgIGNsb3NlTmV3VG9kb0Zvcm0oKTtcbiAgICAgICAgY2xvc2VFZGl0VG9kbygpO1xuICAgICAgICBoaWRlVG9kb3MoKTtcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHsgbG9hZFdlZWssIGxvYWRUb2RheSwgbG9hZFByb2plY3RzUGFnZSwgY2xlYXJTY3JlZW4sIG9wZW5OZXdUb2RvRm9ybSwgY2xvc2VOZXdUb2RvRm9ybSwgbG9hZEhvbWUsIG9wZW5FZGl0VG9kbywgY2xvc2VFZGl0VG9kbyB9XG59KSgpO1xuXG5leHBvcnQgeyBVSSB9IiwiaW1wb3J0IGlzU2FtZVdlZWsgZnJvbSBcIi4uL2lzU2FtZVdlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNUaGlzV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzYW1lIHdlZWsgYXMgdGhlIGN1cnJlbnQgZGF0ZT9cbiAqXG4gKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgbm90IHByZXNlbnQgaW4gdGhlIEZQIHN1Ym1vZHVsZSBhc1xuICogPiBpdCB1c2VzIGBEYXRlLm5vdygpYCBpbnRlcm5hbGx5IGhlbmNlIGltcHVyZSBhbmQgY2FuJ3QgYmUgc2FmZWx5IGN1cnJpZWQuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyBpbiB0aGlzIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCwgaXMgMjEgU2VwdGVtYmVyIDIwMTQgaW4gdGhpcyB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNUaGlzV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQgYW5kIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5XG4gKiAvLyBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUaGlzV2VlayhkaXJ0eURhdGUsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVXZWVrKGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSwgb3B0aW9ucyk7XG59IiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyB0b2RheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiaW1wb3J0IHsgYXBwIH0gZnJvbSAnLi9pbmRleC5qcydcbmltcG9ydCB7IFVJIH0gZnJvbSAnLi9VSS5qcyc7XG5cbmV4cG9ydCBjb25zdCBiaW5kRXZlbnQgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIG5ld1RvZG9Gb3JtKGUpIHtcbiAgICAgICAgY29uc3QgZXZlbnRDbGFzcyA9IGUudGFyZ2V0LmNsYXNzTGlzdFswXTtcbiAgICAgICAgLy8gYWRkIG5ldyBib29rIGJ1dHRvblxuICAgICAgICBpZihldmVudENsYXNzID09PSBcImFkZEJvb2tCdG5cIikge1xuICAgICAgICAgICAgYXBwLmFkZFRvZG8oKTtcbiAgICAgICAgLy8gY2FuY2VsIGJ1dHRvblxuICAgICAgICB9IGVsc2UgaWYoZXZlbnRDbGFzcyA9PT0gXCJjbG9zZVRvZG9Gb3JtXCIpIHtcbiAgICAgICAgICAgIFVJLmNsb3NlTmV3VG9kb0Zvcm0oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZG8oZSkge1xuICAgICAgICBjb25zdCBldmVudENsYXNzID0gZS50YXJnZXQuY2xhc3NMaXN0WzBdO1xuICAgICAgICBsZXQgaW5kZXggPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC5pZDtcblxuICAgICAgICBpZihldmVudENsYXNzID09PSBcImRlbGV0ZVRvZG9CdG5cIikge1xuICAgICAgICAgICAgYXBwLmRlbGV0ZVRvZG8oaW5kZXgpXG4gICAgICAgIH0gZWxzZSBpZihldmVudENsYXNzID09PSBcImVkaXRUb2RvQnRuXCIpIHtcbiAgICAgICAgICAgIGFwcC5lZGl0VG9kbyhpbmRleClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRUb2RvKGUpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gZS50YXJnZXQucGFyZW50Tm9kZS5kYXRhc2V0LmlkO1xuICAgICAgICBjb25zdCBldmVudENsYXNzID0gZS50YXJnZXQuY2xhc3NMaXN0WzBdO1xuICAgICAgICBpZihldmVudENsYXNzID09PSBcImNhbmNlbEVkaXRCdG5cIikge1xuICAgICAgICAgICBhcHAuY2FuY2VsRWRpdFRvZG8oKTtcbiAgICAgICAgfSBlbHNlIGlmKGV2ZW50Q2xhc3MgPT09IFwic2F2ZUVkaXRCdG5cIikge1xuICAgICAgICAgICBjb25zdCBlZGl0VGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdFRpdGxlSW5wdXRcIikudmFsdWU7XG4gICAgICAgICAgIGNvbnN0IGVkaXREZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0RGVzY3JpcHRpb25JbnB1dFwiKS52YWx1ZTtcbiAgICAgICAgICAgY29uc3QgZWRpdER1ZURhdGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdER1ZURhdGVJbnB1dFwiKS52YWx1ZTtcbiAgICAgICAgICAgY29uc3QgZWRpdFByaW9yaXR5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXRQcmlvcml0eUlucHV0XCIpLnZhbHVlO1xuICAgICAgICAgICBjb25zdCBlZGl0UHJvamVjdElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0UHJvamVjdElucHV0XCIpLnZhbHVlO1xuICAgICAgICAgICBhcHAuc2F2ZUVkaXRUb2RvKGluZGV4LCBlZGl0VGl0bGVJbnB1dCwgZWRpdERlc2NyaXB0aW9uSW5wdXQsIGVkaXREdWVEYXRlSW5wdXQsIGVkaXRQcmlvcml0eUlucHV0LCBlZGl0UHJvamVjdElucHV0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IG5ld1RvZG9Gb3JtLCB0b2RvLCBlZGl0VG9kbyB9XG59KSgpOyIsImltcG9ydCB7IFVJIH0gZnJvbSAnLi9VSS5qcyc7XG5pbXBvcnQgeyBiaW5kRXZlbnQgfSBmcm9tICcuL2JpbmRFdmVudCc7XG5cbmNvbnN0IHN0b3JhZ2UgPSAoKCkgPT4ge1xuXG4gICAgZnVuY3Rpb24gc2F2ZVRvZG9zKHRvZG9zKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9kb3NcIiwgSlNPTi5zdHJpbmdpZnkodG9kb3MpKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRUb2RvcygpIHtcbiAgICAgICAgbGV0IHJlcyA9IFtdO1xuICAgICAgICBsZXQgbG9hZGVkVG9kb3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9kb3NcIikpO1xuICAgICAgICBsb2FkZWRUb2Rvcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgbGV0IG5ld1RvZG8gPSBuZXcgVG9kbyhlbGVtZW50LnRpdGxlLCBlbGVtZW50LmRlc2NyaXB0aW9uLCBlbGVtZW50LmR1ZURhdGUsIGVsZW1lbnQucHJpb3JpdHksIGVsZW1lbnQucHJvamVjdCk7XG4gICAgICAgICAgICByZXMucHVzaChuZXdUb2RvKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICByZXR1cm4geyBzYXZlVG9kb3MsIGxvYWRUb2RvcyB9XG59KSgpO1xuXG5mdW5jdGlvbiBUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QpIHtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7IFxuXG59ICAgIFxuXG5Ub2RvLnByb3RvdHlwZS51cGRhdGVUb2RvID0gZnVuY3Rpb24obmV3VGl0bGUsIG5ld0Rlc2NyaXB0aW9uLCBuZXdEdWVEYXRlLCBuZXdQcmlvcml0eSwgbmV3UHJvamVjdCkge1xuICAgIHRoaXMudGl0bGUgPSBuZXdUaXRsZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgdGhpcy5kdWVEYXRlID0gbmV3RHVlRGF0ZTtcbiAgICB0aGlzLnByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG4gICAgdGhpcy5wcm9qZWN0ID0gbmV3UHJvamVjdDtcbn1cblxuXG5leHBvcnQgY29uc3QgYXBwID0gKCgpID0+IHtcblxuICAgIC8vIHN0b3JlcyBldmVyeSB0b2RvXG4gICAgbGV0IHRvZG9zID0gW107ICAgIFxuICAgIFxuICAgIC8vIGNhY2hlIGRvbVxuICAgIGNvbnN0IG5ld0Jvb2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld0Jvb2tCdG5cIik7XG4gICAgY29uc3QgbmV3VG9kb0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1RvZG9Gb3JtXCIpO1xuICAgIGNvbnN0IHRvZG9zQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2Rvcy1jb250YWluZXJcIik7XG4gICAgY29uc3QgZWRpdFRvZG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXRUb2RvQ29udGFpbmVyXCIpXG5cbiAgICBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aXRsZVwiKVxuICAgIGNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpXG4gICAgY29uc3QgZHVlZGF0ZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkdWVkYXRlXCIpXG4gICAgY29uc3QgcHJpb3JpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIilcbiAgICBjb25zdCBwcm9qZWN0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RcIilcblxuICAgIGNvbnN0IG5hdlByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZQcm9qZWN0c1wiKTtcbiAgICBjb25zdCBuYXZIb21lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZIb21lXCIpO1xuICAgIGNvbnN0IG5hdlRvZGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZUb2RheVwiKTtcbiAgICBjb25zdCBuYXZXZWVrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZXZWVrXCIpO1xuXG4gICAgLy8gYWRkIGV2ZW50c1xuICAgIG5ld0Jvb2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIFVJLm9wZW5OZXdUb2RvRm9ybSApXG4gICAgbmV3VG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJpbmRFdmVudC5uZXdUb2RvRm9ybSlcbiAgICB0b2Rvc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYmluZEV2ZW50LnRvZG8pXG4gICAgZWRpdFRvZG9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJpbmRFdmVudC5lZGl0VG9kbylcbiAgICBuYXZQcm9qZWN0cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBVSS5sb2FkUHJvamVjdHNQYWdlKHRvZG9zKTtcbiAgICB9KVxuICAgIG5hdkhvbWUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgVUkubG9hZEhvbWUodG9kb3MpO1xuICAgIH0pO1xuICAgIG5hdlRvZGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAgKCkgPT4ge1xuICAgICAgICBVSS5sb2FkVG9kYXkodG9kb3MpXG4gICAgfSlcbiAgICBuYXZXZWVrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIFVJLmxvYWRXZWVrKHRvZG9zKVxuICAgIH0pXG5cblxuICAgIC8vIGZ1bmN0aW9uc1xuICAgIGZ1bmN0aW9uIGFkZFRvZG8oKSB7XG4gICAgICAgIGlmKCF0aXRsZUlucHV0LnZhbHVlKSB7XG4gICAgICAgICAgICBhbGVydChcIllvdSBoYXZlIHRvIGZpbGwgaW4gYSB0aXRsZSFcIilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdUb2RvID0gbmV3IFRvZG8odGl0bGVJbnB1dC52YWx1ZSwgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSwgZHVlZGF0ZUlucHV0LnZhbHVlLCBwcmlvcml0eUlucHV0LnZhbHVlLCBwcm9qZWN0SW5wdXQudmFsdWUpO1xuICAgICAgICB0b2Rvcy5wdXNoKG5ld1RvZG8pXG4gICAgICAgIHN0b3JhZ2Uuc2F2ZVRvZG9zKHRvZG9zKVxuICAgICAgICBVSS5sb2FkSG9tZSh0b2RvcylcbiAgICAgICAgVUkuY2xvc2VOZXdUb2RvRm9ybSgpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBkZWxldGVUb2RvKGluZGV4KSB7XG4gICAgICAgIHRvZG9zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIFVJLmxvYWRIb21lKHRvZG9zKTtcbiAgICAgICAgc3RvcmFnZS5zYXZlVG9kb3ModG9kb3MpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWRpdFRvZG8oaW5kZXgpIHtcbiAgICAgICAgVUkub3BlbkVkaXRUb2RvKHRvZG9zW2luZGV4XSwgaW5kZXgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuY2VsRWRpdFRvZG8oKSB7XG4gICAgICAgIFVJLmNsb3NlRWRpdFRvZG8oKTtcbiAgICAgICAgVUkubG9hZEhvbWUodG9kb3MpO1xuICAgIH1cbiBcbiAgICBcbiAgICBmdW5jdGlvbiBzYXZlRWRpdFRvZG8oaW5kZXgsIG5ld1RpdGxlLCBuZXdEZXNjcmlwdGlvbiwgbmV3RHVlRGF0ZSwgbmV3UHJpb3JpdHksIG5ld1Byb2plY3QpIHtcbiAgICAgICAgdG9kb3NbaW5kZXhdLnVwZGF0ZVRvZG8obmV3VGl0bGUsIG5ld0Rlc2NyaXB0aW9uLCBuZXdEdWVEYXRlLCBuZXdQcmlvcml0eSwgbmV3UHJvamVjdCk7XG4gICAgICAgIFVJLmNsb3NlRWRpdFRvZG8oKTtcbiAgICAgICAgVUkubG9hZEhvbWUodG9kb3MpO1xuICAgICAgICBzdG9yYWdlLnNhdmVUb2Rvcyh0b2RvcylcblxuICAgIH1cbiAgXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgdG9kb3MgPSBzdG9yYWdlLmxvYWRUb2RvcygpO1xuICAgICAgICBVSS5sb2FkSG9tZSh0b2RvcylcbiAgICB9XG5cblxuXG4gICAgaW5pdCgpO1xuXG5cbiAgICByZXR1cm4ge2FkZFRvZG8sIGRlbGV0ZVRvZG8sIGVkaXRUb2RvLCBjYW5jZWxFZGl0VG9kbywgc2F2ZUVkaXRUb2RvfVxuXG59KSgpO1xuXG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJndW1lbnRzIiwiYXJnU3RyIiwidG9TdHJpbmciLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkaXJ0eURhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJpc1NhbWVEYXkiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdFN0YXJ0T2ZEYXkiLCJkYXRlUmlnaHRTdGFydE9mRGF5IiwidG9JbnRlZ2VyIiwiZGlydHlOdW1iZXIiLCJudW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwic3RhcnRPZldlZWsiLCJvcHRpb25zIiwiX3JlZiIsIl9yZWYyIiwiX3JlZjMiLCJfb3B0aW9ucyR3ZWVrU3RhcnRzT24iLCJfb3B0aW9ucyRsb2NhbGUiLCJfb3B0aW9ucyRsb2NhbGUkb3B0aW8iLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwiLCJfZGVmYXVsdE9wdGlvbnMkbG9jYWwyIiwid2Vla1N0YXJ0c09uIiwibG9jYWxlIiwiUmFuZ2VFcnJvciIsImRheSIsImdldERheSIsImRpZmYiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzU2FtZVdlZWsiLCJkYXRlTGVmdFN0YXJ0T2ZXZWVrIiwiZGF0ZVJpZ2h0U3RhcnRPZldlZWsiLCJVSSIsIm5ld1RvZG9Gb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidG9kb3NDb250YWluZXIiLCJlZGl0VG9kb0NvbnRhaW5lciIsImNvbnRlbnQiLCJuYXZQcm9qZWN0cyIsIm5hdkhvbWUiLCJuYXZUb2RheSIsIm5hdldlZWsiLCJjbG9zZU5ld1RvZG9Gb3JtIiwiY2hpbGROb2RlcyIsImZvckVhY2giLCJlbGUiLCJ0eXBlIiwidmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJjbG9zZUVkaXRUb2RvIiwiaW5uZXJIVE1MIiwiY2xlYXJTY3JlZW4iLCJsb2FkV2VlayIsInRvZG9zIiwicmVtb3ZlIiwiaW5kZXgiLCJ3ZWVrVG9kb3MiLCJmaWx0ZXIiLCJ0b2RvIiwibm93IiwiaXNUaGlzV2VlayIsInBhcnNlIiwiZHVlRGF0ZSIsInRpdGxlIiwibG9hZFRvZGF5IiwidG9kYXlUb2RvcyIsImlzVG9kYXkiLCJsb2FkUHJvamVjdHNQYWdlIiwicHJvamVjdE5hbWVzIiwibWFwIiwicHJvamVjdCIsIlNldCIsInRvZG9zV2l0aFNhbWVQcm9qZWN0IiwicHJvamVjdENvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJwcm9qZWN0VGl0bGUiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwicHJvamVjdFRvZG8iLCJvcGVuTmV3VG9kb0Zvcm0iLCJsb2FkSG9tZSIsIm9wZW5FZGl0VG9kbyIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJiaW5kRXZlbnQiLCJlIiwiZXZlbnRDbGFzcyIsInRhcmdldCIsImFwcCIsImFkZFRvZG8iLCJwYXJlbnROb2RlIiwiZGF0YXNldCIsImlkIiwiZGVsZXRlVG9kbyIsImVkaXRUb2RvIiwiY2FuY2VsRWRpdFRvZG8iLCJlZGl0VGl0bGVJbnB1dCIsImVkaXREZXNjcmlwdGlvbklucHV0IiwiZWRpdER1ZURhdGVJbnB1dCIsImVkaXRQcmlvcml0eUlucHV0IiwiZWRpdFByb2plY3RJbnB1dCIsInNhdmVFZGl0VG9kbyIsInN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlcyIsImdldEl0ZW0iLCJlbGVtZW50IiwibmV3VG9kbyIsIlRvZG8iLCJwdXNoIiwidGhpcyIsInVwZGF0ZVRvZG8iLCJuZXdUaXRsZSIsIm5ld0Rlc2NyaXB0aW9uIiwibmV3RHVlRGF0ZSIsIm5ld1ByaW9yaXR5IiwibmV3UHJvamVjdCIsIm5ld0Jvb2tCdG4iLCJ0aXRsZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsImR1ZWRhdGVJbnB1dCIsInByaW9yaXR5SW5wdXQiLCJwcm9qZWN0SW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiYWxlcnQiLCJzcGxpY2UiXSwic291cmNlUm9vdCI6IiJ9