(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(e){t(1,arguments);var o=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===o?new Date(e.getTime()):"number"==typeof e||"[object Number]"===o?new Date(e):("string"!=typeof e&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function n(e){t(1,arguments);var n=o(e);return n.setHours(0,0,0,0),n}function i(e,o){t(2,arguments);var i=n(e),d=n(o);return i.getTime()===d.getTime()}function d(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}e.d({},{z:()=>f,l:()=>T});var r={};function c(){return r}function a(e,n){var i,r,a,l,s,u,p,v;t(1,arguments);var m=c(),y=d(null!==(i=null!==(r=null!==(a=null!==(l=null==n?void 0:n.weekStartsOn)&&void 0!==l?l:null==n||null===(s=n.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==a?a:m.weekStartsOn)&&void 0!==r?r:null===(p=m.locale)||void 0===p||null===(v=p.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==i?i:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=o(e),T=f.getDay(),S=(T<y?7:0)+T-y;return f.setDate(f.getDate()-S),f.setHours(0,0,0,0),f}function l(e,o,n){t(2,arguments);var i=a(e,n),d=a(o,n);return i.getTime()===d.getTime()}const s=(()=>{const e=document.querySelector(".newTodoForm"),o=document.querySelector(".todos-container"),n=document.querySelector(".editTodoContainer"),d=document.querySelector("#content"),r=document.querySelector(".navProjects"),c=document.querySelector(".navHome"),a=document.querySelector(".navToday"),s=document.querySelector(".navWeek");function u(){e.childNodes.forEach((e=>{"text"===e.type&&(e.value="")})),e.classList.add("inactive")}function p(){n.innerHTML=""}function v(){u(),p(),o.innerHTML="",d.innerHTML=""}return{loadWeek:function(e){s.classList.add("selected"),a.classList.remove("selected"),c.classList.remove("selected"),r.classList.remove("selected"),v();let n=0,i=e.filter((e=>{if(function(e,o){return t(1,arguments),l(e,Date.now(),o)}(Date.parse(e.dueDate)))return e}));i.forEach((e=>{o.innerHTML+=`\n            <div class="todo" data-id="${n}">\n                <p>${e.title}</p>\n                <p>Due: ${e.dueDate}</p>\n                <div>\n                    <input type="button" value="Edit" class="editTodoBtn">\n                    <input type="button" value="Delete" class="deleteTodoBtn">\n                </div>\n            </div>\n            `,n++}))},loadToday:function(e){a.classList.add("selected"),c.classList.remove("selected"),s.classList.remove("selected"),r.classList.remove("selected"),v();let n=0,d=e.filter((e=>{if(function(e){return t(1,arguments),i(e,Date.now())}(Date.parse(e.dueDate)))return e}));d.forEach((e=>{o.innerHTML+=`\n            <div class="todo" data-id="${n}">\n                <p>${e.title}</p>\n                <p>Due: ${e.dueDate}</p>\n                <div>\n                    <input type="button" value="Edit" class="editTodoBtn">\n                    <input type="button" value="Delete" class="deleteTodoBtn">\n                </div>\n            </div>\n            `,n++}))},loadProjectsPage:function(e){r.classList.add("selected"),a.classList.remove("selected"),c.classList.remove("selected"),s.classList.remove("selected"),v();const t=e.map((e=>e.project));[...new Set(t)].forEach((t=>{let o=e.filter((e=>{if(e.project===t)return e}));const n=document.createElement("div");n.classList.add("projectContainer");const i=document.createElement("div");i.textContent=t,n.appendChild(i),o.forEach((e=>{const t=document.createElement("li");t.textContent=e.title,t.classList.add("projectTodos"),n.appendChild(t)})),d.appendChild(n)}))},clearScreen:v,openNewTodoForm:function(){e.classList.remove("inactive"),n.innerHTML="",o.innerHTML=""},closeNewTodoForm:u,loadHome:function(e){c.classList.add("selected"),a.classList.remove("selected"),s.classList.remove("selected"),r.classList.remove("selected"),v();let t=0;e.forEach((e=>{o.innerHTML+=`\n            <div class="todo" data-id="${t}">\n                <p>${e.title}</p>\n                <p>Due: ${e.dueDate}</p>\n                <div>\n                    <input type="button" value="Edit" class="editTodoBtn">\n                    <input type="button" value="Delete" class="deleteTodoBtn">\n                </div>\n            </div>\n            `,t++}))},openEditTodo:function(e,t){o.innerHTML="",u(),n.innerHTML=`\n            <div class="editTodo" data-id="${t}">\n                <input type="text" value="${e.title}" class="editTitleInput">\n                <input type="text" value="${e.description}" class="editDescriptionInput">\n                <input type="date" value="${e.dueDate}" class="editDueDateInput"> \n                <select name="priority" id="priority" class="editPriorityInput">\n                    <option ${"low"==e.priority?"selected":""} value="low">Low</option>\n                    <option ${"mid"==e.priority?"selected":""} value="mid">Mid</option>\n                    <option ${"high"==e.priority?"selected":""} value="high">High</option>\n                </select>\n                <input type="text" value="${e.project}" class="editProjectInput">\n                <input type="button" value="Save" class="saveEditBtn">\n                <input type="button" value="Cancel" class="cancelEditBtn">\n            </div>\n            `},closeEditTodo:p}})(),u=function(e){const t=e.target.classList[0];"addBookBtn"===t?T.addTodo():"closeTodoForm"===t&&s.closeNewTodoForm()},p=function(e){const t=e.target.classList[0];let o=e.target.parentNode.parentNode.dataset.id;"deleteTodoBtn"===t?T.deleteTodo(o):"editTodoBtn"===t&&T.editTodo(o)},v=function(e){let t=e.target.parentNode.dataset.id;const o=e.target.classList[0];if("cancelEditBtn"===o)T.cancelEditTodo();else if("saveEditBtn"===o){const e=document.querySelector(".editTitleInput").value,o=document.querySelector(".editDescriptionInput").value,n=document.querySelector(".editDueDateInput").value,i=document.querySelector(".editPriorityInput").value,d=document.querySelector(".editProjectInput").value;T.saveEditTodo(t,e,o,n,i,d)}},m=function(e){localStorage.setItem("todos",JSON.stringify(e))},y=function e(){let t=[],o=JSON.parse(localStorage.getItem("todos"));return 0==e.length||o.forEach((e=>{let o=new f(e.title,e.description,e.dueDate,e.priority,e.project);t.push(o)})),t};function f(e,t,o,n,i){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.project=i}f.prototype.updateTodo=function(e,t,o,n,i){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.project=i};const T=(()=>{let e=[];const t=document.querySelector(".newBookBtn"),o=document.querySelector(".newTodoForm"),n=document.querySelector(".todos-container"),i=document.querySelector(".editTodoContainer"),d=document.querySelector("#title"),r=document.querySelector("#description"),c=document.querySelector("#duedate"),a=document.querySelector("#priority"),l=document.querySelector("#project"),T=document.querySelector(".navProjects"),S=document.querySelector(".navHome"),L=document.querySelector(".navToday"),h=document.querySelector(".navWeek");return t.addEventListener("click",s.openNewTodoForm),o.addEventListener("click",u),n.addEventListener("click",p),i.addEventListener("click",v),T.addEventListener("click",(()=>{s.loadProjectsPage(e)})),S.addEventListener("click",(()=>{s.loadHome(e)})),L.addEventListener("click",(()=>{s.loadToday(e)})),h.addEventListener("click",(()=>{s.loadWeek(e)})),e=y(),s.loadHome(e),{addTodo:function(){if(!d.value)return void alert("You have to fill in a title!");const t=new f(d.value,r.value,c.value,a.value,l.value);e.push(t),m(e),s.loadHome(e)},deleteTodo:function(t){e.splice(t,1),s.loadHome(e),m(e)},editTodo:function(t){s.openEditTodo(e[t],t)},cancelEditTodo:function(){s.closeEditTodo(),s.loadHome(e)},saveEditTodo:function(t,o,n,i,d,r){e[t].updateTodo(o,n,i,d,r),s.closeEditTodo(),s.loadHome(e),m(e)}}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUJBLEVBQXdCLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEYsRUFBb0JJLEVBQUVGLEVBQVlDLEtBQVNILEVBQW9CSSxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLElBRTFFLEVDTkRILEVBQXdCLENBQUNTLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLElDQW5FLFNBQVNJLEVBQWFDLEVBQVVDLEdBQzdDLEdBQUlBLEVBQUtDLE9BQVNGLEVBQ2hCLE1BQU0sSUFBSUcsVUFBVUgsRUFBVyxhQUFlQSxFQUFXLEVBQUksSUFBTSxJQUFNLHVCQUF5QkMsRUFBS0MsT0FBUyxXQUVwSCxDQzRCZSxTQUFTRSxFQUFPQyxHQUM3Qk4sRUFBYSxFQUFHTyxXQUNoQixJQUFJQyxFQUFTakIsT0FBT00sVUFBVVksU0FBU1YsS0FBS08sR0FFNUMsT0FBSUEsYUFBb0JJLE1BQTRCLGlCQUFiSixHQUFvQyxrQkFBWEUsRUFFdkQsSUFBSUUsS0FBS0osRUFBU0ssV0FDSSxpQkFBYkwsR0FBb0Msb0JBQVhFLEVBQ2xDLElBQUlFLEtBQUtKLElBRVMsaUJBQWJBLEdBQW9DLG9CQUFYRSxHQUFvRCxvQkFBWkksVUFFM0VBLFFBQVFDLEtBQUssc05BRWJELFFBQVFDLE1BQUssSUFBSUMsT0FBUUMsUUFHcEIsSUFBSUwsS0FBS00sS0FFcEIsQ0M5QmUsU0FBU0MsRUFBV0MsR0FDakNsQixFQUFhLEVBQUdPLFdBQ2hCLElBQUlZLEVBQU9kLEVBQU9hLEdBRWxCLE9BREFDLEVBQUtDLFNBQVMsRUFBRyxFQUFHLEVBQUcsR0FDaEJELENBQ1QsQ0NLZSxTQUFTRSxFQUFVQyxFQUFlQyxHQUMvQ3ZCLEVBQWEsRUFBR08sV0FDaEIsSUFBSWlCLEVBQXFCUCxFQUFXSyxHQUNoQ0csRUFBc0JSLEVBQVdNLEdBQ3JDLE9BQU9DLEVBQW1CYixZQUFjYyxFQUFvQmQsU0FDOUQsQ0NwQ2UsU0FBU2UsRUFBVUMsR0FDaEMsR0FBb0IsT0FBaEJBLElBQXdDLElBQWhCQSxJQUF3QyxJQUFoQkEsRUFDbEQsT0FBT1gsSUFHVCxJQUFJWSxFQUFTQyxPQUFPRixHQUVwQixPQUFJRyxNQUFNRixHQUNEQSxFQUdGQSxFQUFTLEVBQUlHLEtBQUtDLEtBQUtKLEdBQVVHLEtBQUtFLE1BQU1MLEVBQ3JELEMsMEJDWkEsSUFBSU0sRUFBaUIsQ0FBQyxFQUNmLFNBQVNDLElBQ2QsT0FBT0QsQ0FDVCxDQzZCZSxTQUFTRSxFQUFZbEIsRUFBV21CLEdBQzdDLElBQUlDLEVBQU1DLEVBQU9DLEVBQU9DLEVBQXVCQyxFQUFpQkMsRUFBdUJDLEVBQXVCQyxFQUU5RzdDLEVBQWEsRUFBR08sV0FDaEIsSUFBSTJCLEVBQWlCQyxJQUNqQlcsRUFBZXBCLEVBQSswQixRQUFwMEJZLEVBQThoQixRQUF0aEJDLEVBQWtkLFFBQXpjQyxFQUE2RyxRQUFwR0MsRUFBd0JKLGFBQXlDLEVBQVNBLEVBQVFTLG9CQUFvRCxJQUExQkwsRUFBbUNBLEVBQXdCSixTQUF5RixRQUF0Q0ssRUFBa0JMLEVBQVFVLGNBQXdDLElBQXBCTCxHQUE0RixRQUFyREMsRUFBd0JELEVBQWdCTCxlQUErQyxJQUExQk0sT0FBNUosRUFBd01BLEVBQXNCRyxvQkFBb0MsSUFBVk4sRUFBbUJBLEVBQVFOLEVBQWVZLG9CQUFvQyxJQUFWUCxFQUFtQkEsRUFBNEQsUUFBbkRLLEVBQXdCVixFQUFlYSxjQUE4QyxJQUExQkgsR0FBeUcsUUFBNURDLEVBQXlCRCxFQUFzQlAsZUFBZ0QsSUFBM0JRLE9BQTlFLEVBQTJIQSxFQUF1QkMsb0JBQW1DLElBQVRSLEVBQWtCQSxFQUFPLEdBRW40QixLQUFNUSxHQUFnQixHQUFLQSxHQUFnQixHQUN6QyxNQUFNLElBQUlFLFdBQVcsb0RBR3ZCLElBQUk3QixFQUFPZCxFQUFPYSxHQUNkK0IsRUFBTTlCLEVBQUsrQixTQUNYQyxHQUFRRixFQUFNSCxFQUFlLEVBQUksR0FBS0csRUFBTUgsRUFHaEQsT0FGQTNCLEVBQUtpQyxRQUFRakMsRUFBS2tDLFVBQVlGLEdBQzlCaEMsRUFBS0MsU0FBUyxFQUFHLEVBQUcsRUFBRyxHQUNoQkQsQ0FDVCxDQ1hlLFNBQVNtQyxFQUFXaEMsRUFBZUMsRUFBZ0JjLEdBQ2hFckMsRUFBYSxFQUFHTyxXQUNoQixJQUFJZ0QsRUFBc0JuQixFQUFZZCxFQUFlZSxHQUNqRG1CLEVBQXVCcEIsRUFBWWIsRUFBZ0JjLEdBQ3ZELE9BQU9rQixFQUFvQjVDLFlBQWM2QyxFQUFxQjdDLFNBQ2hFLENDckNBLE1BQU04QyxFQUFLLE1BR1AsTUFBTUMsRUFBY0MsU0FBU0MsY0FBYyxnQkFDckNDLEVBQWlCRixTQUFTQyxjQUFjLG9CQUN4Q0UsRUFBb0JILFNBQVNDLGNBQWMsc0JBQzNDRyxFQUFVSixTQUFTQyxjQUFjLFlBRWpDSSxFQUFjTCxTQUFTQyxjQUFjLGdCQUNyQ0ssRUFBVU4sU0FBU0MsY0FBYyxZQUNqQ00sRUFBV1AsU0FBU0MsY0FBYyxhQUNsQ08sRUFBVVIsU0FBU0MsY0FBYyxZQVN2QyxTQUFTUSxJQUVMVixFQUFZVyxXQUFXQyxTQUFTQyxJQUNaLFNBQWJBLEVBQUlDLE9BQ1BELEVBQUlFLE1BQVEsR0FBRSxJQUVsQmYsRUFBWWdCLFVBQVVDLElBQUksV0FFOUIsQ0E0R0EsU0FBU0MsSUFDTGQsRUFBa0JlLFVBQVksRUFDbEMsQ0EyQ0EsU0FBU0MsSUFDTFYsSUFDQVEsSUF2RUFmLEVBQWVnQixVQUFZLEdBeUUzQmQsRUFBUWMsVUFBWSxFQUN4QixDQUdBLE1BQU8sQ0FBRUUsU0EzR1QsU0FBa0JDLEdBQ2RiLEVBQVFPLFVBQVVDLElBQUksWUFDdEJULEVBQVNRLFVBQVVPLE9BQU8sWUFDMUJoQixFQUFRUyxVQUFVTyxPQUFPLFlBQ3pCakIsRUFBWVUsVUFBVU8sT0FBTyxZQUM3QkgsSUFDQSxJQUFJSSxFQUFRLEVBQ1JDLEVBQVlILEVBQU1JLFFBQVFDLElBQzFCLEdDOURHLFNBQW9CbkUsRUFBV21CLEdBRTVDLE9BREFyQyxFQUFhLEVBQUdPLFdBQ1QrQyxFQUFXcEMsRUFBV1IsS0FBSzRFLE1BQU9qRCxFQUMzQyxDRDJEZWtELENBQVc3RSxLQUFLOEUsTUFBTUgsRUFBS0ksVUFDMUIsT0FBT0osQ0FDWCxJQUVKRixFQUFVYixTQUFRZSxJQUNkeEIsRUFBZWdCLFdBQ2YsNENBQzZCSywyQkFDcEJHLEVBQUtLLHNDQUNBTCxFQUFLSSwyUEFPbkJQLEdBQU8sR0FHZixFQWdGbUJTLFVBeEluQixTQUFtQlgsR0FDZmQsRUFBU1EsVUFBVUMsSUFBSSxZQUN2QlYsRUFBUVMsVUFBVU8sT0FBTyxZQUN6QmQsRUFBUU8sVUFBVU8sT0FBTyxZQUN6QmpCLEVBQVlVLFVBQVVPLE9BQU8sWUFDN0JILElBQ0EsSUFBSUksRUFBUSxFQUNSVSxFQUFhWixFQUFNSSxRQUFRQyxJQUMzQixHRTNDRyxTQUFpQm5FLEdBRTlCLE9BREFsQixFQUFhLEVBQUdPLFdBQ1RjLEVBQVVILEVBQVdSLEtBQUs0RSxNQUNuQyxDRndDZU8sQ0FBUW5GLEtBQUs4RSxNQUFNSCxFQUFLSSxVQUN2QixPQUFPSixDQUNYLElBRUpPLEVBQVd0QixTQUFRZSxJQUNmeEIsRUFBZWdCLFdBQ2YsNENBQzZCSywyQkFDcEJHLEVBQUtLLHNDQUNBTCxFQUFLSSwyUEFPbkJQLEdBQU8sR0FHZixFQTZHOEJZLGlCQWpEOUIsU0FBMEJkLEdBQ3RCaEIsRUFBWVUsVUFBVUMsSUFBSSxZQUMxQlQsRUFBU1EsVUFBVU8sT0FBTyxZQUMxQmhCLEVBQVFTLFVBQVVPLE9BQU8sWUFDekJkLEVBQVFPLFVBQVVPLE9BQU8sWUFDekJILElBR0EsTUFBTWlCLEVBQWVmLEVBQU1nQixLQUFLWCxHQUNyQkEsRUFBS1ksVUFHRSxJQUFJLElBQUlDLElBQUlILElBRWxCekIsU0FBUTJCLElBQ2hCLElBQUlFLEVBQXVCbkIsRUFBTUksUUFBT0MsSUFDcEMsR0FBR0EsRUFBS1ksVUFBWUEsRUFDaEIsT0FBT1osQ0FDWCxJQUdKLE1BQU1lLEVBQW1CekMsU0FBUzBDLGNBQWMsT0FDaERELEVBQWlCMUIsVUFBVUMsSUFBSSxvQkFFL0IsTUFBTTJCLEVBQWUzQyxTQUFTMEMsY0FBYyxPQUM1Q0MsRUFBYUMsWUFBY04sRUFDM0JHLEVBQWlCSSxZQUFZRixHQUU3QkgsRUFBcUI3QixTQUFRZSxJQUN6QixNQUFNb0IsRUFBYzlDLFNBQVMwQyxjQUFjLE1BQzNDSSxFQUFZRixZQUFjbEIsRUFBS0ssTUFDL0JlLEVBQVkvQixVQUFVQyxJQUFJLGdCQUMxQnlCLEVBQWlCSSxZQUFZQyxFQUFXLElBRzVDMUMsRUFBUXlDLFlBQVlKLEVBQWdCLEdBRzVDLEVBV2dEdEIsY0FBYTRCLGdCQS9LN0QsV0FDSWhELEVBQVlnQixVQUFVTyxPQUFPLFlBQzdCbkIsRUFBa0JlLFVBQVksR0FDOUJoQixFQUFlZ0IsVUFBWSxFQUMvQixFQTJLOEVULG1CQUFrQnVDLFNBL0poRyxTQUFrQjNCLEdBQ2RmLEVBQVFTLFVBQVVDLElBQUksWUFDdEJULEVBQVNRLFVBQVVPLE9BQU8sWUFDMUJkLEVBQVFPLFVBQVVPLE9BQU8sWUFDekJqQixFQUFZVSxVQUFVTyxPQUFPLFlBQzdCSCxJQUNBLElBQUlJLEVBQVEsRUFDWkYsRUFBTVYsU0FBUWUsSUFDVnhCLEVBQWVnQixXQUNmLDRDQUM2QkssMkJBQ3BCRyxFQUFLSyxzQ0FDQUwsRUFBS0ksMlBBT25CUCxHQUFPLEdBRWYsRUEwSTBHMEIsYUExRTFHLFNBQXNCdkIsRUFBTUgsR0FDeEJyQixFQUFlZ0IsVUFBWSxHQUMzQlQsSUFDQU4sRUFBa0JlLFVBQ2QsZ0RBQ2lDSyxrREFDREcsRUFBS0ssNkVBQ0xMLEVBQUt3Qix5RkFDTHhCLEVBQUtJLHNKQUVELE9BQWpCSixFQUFLeUIsU0FBcUIsV0FBYSw0REFDdEIsT0FBakJ6QixFQUFLeUIsU0FBcUIsV0FBYSw0REFDdEIsUUFBakJ6QixFQUFLeUIsU0FBc0IsV0FBYSx1R0FFM0J6QixFQUFLWSwwTkFLN0MsRUF1RHdIckIsZ0JBQzNILEVBOUxVLEdHSEVtQyxFQUNULFNBQXFCQyxHQUNqQixNQUFNQyxFQUFhRCxFQUFFRSxPQUFPeEMsVUFBVSxHQUVwQixlQUFmdUMsRUFDQ0UsRUFBSUMsVUFFaUIsa0JBQWZILEdBQ054RCxFQUFHVyxrQkFFWCxFQVZTMkMsRUFZVCxTQUFjQyxHQUNWLE1BQU1DLEVBQWFELEVBQUVFLE9BQU94QyxVQUFVLEdBQ3RDLElBQUlRLEVBQVE4QixFQUFFRSxPQUFPRyxXQUFXQSxXQUFXQyxRQUFRQyxHQUVqQyxrQkFBZk4sRUFDQ0UsRUFBSUssV0FBV3RDLEdBQ00sZ0JBQWYrQixHQUNORSxFQUFJTSxTQUFTdkMsRUFFckIsRUFyQlM2QixFQXVCVCxTQUFrQkMsR0FDZCxJQUFJOUIsRUFBUThCLEVBQUVFLE9BQU9HLFdBQVdDLFFBQVFDLEdBQ3hDLE1BQU1OLEVBQWFELEVBQUVFLE9BQU94QyxVQUFVLEdBQ3RDLEdBQWtCLGtCQUFmdUMsRUFDQUUsRUFBSU8sc0JBQ0EsR0FBa0IsZ0JBQWZULEVBQThCLENBQ3JDLE1BQU1VLEVBQWlCaEUsU0FBU0MsY0FBYyxtQkFBbUJhLE1BQzNEbUQsRUFBdUJqRSxTQUFTQyxjQUFjLHlCQUF5QmEsTUFDdkVvRCxFQUFtQmxFLFNBQVNDLGNBQWMscUJBQXFCYSxNQUMvRHFELEVBQW9CbkUsU0FBU0MsY0FBYyxzQkFBc0JhLE1BQ2pFc0QsRUFBbUJwRSxTQUFTQyxjQUFjLHFCQUFxQmEsTUFDckUwQyxFQUFJYSxhQUFhOUMsRUFBT3lDLEVBQWdCQyxFQUFzQkMsRUFBa0JDLEVBQW1CQyxFQUN0RyxDQUNKLEVDckNTRSxFQUVULFNBQW1CakQsR0FDZmtELGFBQWFDLFFBQVEsUUFBU0MsS0FBS0MsVUFBVXJELEdBQ2pELEVBSlNpRCxFQU1ULFNBQVNLLElBQ0wsSUFBSUMsRUFBTSxHQUNOQyxFQUFjSixLQUFLNUMsTUFBTTBDLGFBQWFPLFFBQVEsVUFDbEQsT0FBdUIsR0FBcEJILEVBQVVuSSxRQUNicUksRUFBWWxFLFNBQVFvRSxJQUNoQixJQUFJQyxFQUFVLElBQUlDLEVBQUtGLEVBQVFoRCxNQUFPZ0QsRUFBUTdCLFlBQWE2QixFQUFRakQsUUFBU2lELEVBQVE1QixTQUFVNEIsRUFBUXpDLFNBQ3RHc0MsRUFBSU0sS0FBS0YsRUFBTyxJQUhhSixDQU1yQyxFQ1pHLFNBQVNLLEVBQUtsRCxFQUFPbUIsRUFBYXBCLEVBQVNxQixFQUFVYixHQUN4RDZDLEtBQUtwRCxNQUFRQSxFQUNib0QsS0FBS2pDLFlBQWNBLEVBQ25CaUMsS0FBS3JELFFBQVVBLEVBQ2ZxRCxLQUFLaEMsU0FBV0EsRUFDaEJnQyxLQUFLN0MsUUFBVUEsQ0FDbkIsQ0FFQTJDLEVBQUsvSSxVQUFVa0osV0FBYSxTQUFTQyxFQUFVQyxFQUFnQkMsRUFBWUMsRUFBYUMsR0FDcEZOLEtBQUtwRCxNQUFRc0QsRUFDYkYsS0FBS2pDLFlBQWNvQyxFQUNuQkgsS0FBS3JELFFBQVV5RCxFQUNmSixLQUFLaEMsU0FBV3FDLEVBQ2hCTCxLQUFLN0MsUUFBVW1ELENBQ25CLEVBR08sTUFBTWpDLEVBQU0sTUFHZixJQUFJbkMsRUFBUSxHQUdaLE1BQU1xRSxFQUFhMUYsU0FBU0MsY0FBYyxlQUNwQ0YsRUFBY0MsU0FBU0MsY0FBYyxnQkFDckNDLEVBQWlCRixTQUFTQyxjQUFjLG9CQUN4Q0UsRUFBb0JILFNBQVNDLGNBQWMsc0JBRTNDMEYsRUFBYTNGLFNBQVNDLGNBQWMsVUFDcEMyRixFQUFtQjVGLFNBQVNDLGNBQWMsZ0JBQzFDNEYsRUFBZTdGLFNBQVNDLGNBQWMsWUFDdEM2RixFQUFnQjlGLFNBQVNDLGNBQWMsYUFDdkM4RixFQUFlL0YsU0FBU0MsY0FBYyxZQUV0Q0ksRUFBY0wsU0FBU0MsY0FBYyxnQkFDckNLLEVBQVVOLFNBQVNDLGNBQWMsWUFDakNNLEVBQVdQLFNBQVNDLGNBQWMsYUFDbENPLEVBQVVSLFNBQVNDLGNBQWMsWUFtRXZDLE9BaEVBeUYsRUFBV00saUJBQWlCLFFBQVNsRyxFQUFHaUQsaUJBQ3hDaEQsRUFBWWlHLGlCQUFpQixRQUFTNUMsR0FDdENsRCxFQUFlOEYsaUJBQWlCLFFBQVM1QyxHQUN6Q2pELEVBQWtCNkYsaUJBQWlCLFFBQVM1QyxHQUM1Qy9DLEVBQVkyRixpQkFBaUIsU0FBUyxLQUNsQ2xHLEVBQUdxQyxpQkFBaUJkLEVBQU0sSUFFOUJmLEVBQVEwRixpQkFBaUIsU0FBUyxLQUM5QmxHLEVBQUdrRCxTQUFTM0IsRUFBTSxJQUV0QmQsRUFBU3lGLGlCQUFpQixTQUFVLEtBQ2hDbEcsRUFBR2tDLFVBQVVYLEVBQUssSUFFdEJiLEVBQVF3RixpQkFBaUIsU0FBUyxLQUM5QmxHLEVBQUdzQixTQUFTQyxFQUFLLElBeUNqQkEsRUFBUWlELElBQ1J4RSxFQUFHa0QsU0FBUzNCLEdBUVQsQ0FBQ29DLFFBN0NSLFdBQ0ksSUFBSWtDLEVBQVc3RSxNQUVYLFlBREFtRixNQUFNLGdDQUdWLE1BQU1qQixFQUFVLElBQUlDLEVBQUtVLEVBQVc3RSxNQUFPOEUsRUFBaUI5RSxNQUFPK0UsRUFBYS9FLE1BQU9nRixFQUFjaEYsTUFBT2lGLEVBQWFqRixPQUN6SE8sRUFBTTZELEtBQUtGLEdBQ1hWLEVBQWtCakQsR0FDbEJ2QixFQUFHa0QsU0FBUzNCLEVBQ2hCLEVBb0NpQndDLFdBbENqQixTQUFvQnRDLEdBQ2hCRixFQUFNNkUsT0FBTzNFLEVBQU8sR0FDcEJ6QixFQUFHa0QsU0FBUzNCLEdBQ1ppRCxFQUFrQmpELEVBQ3RCLEVBOEI2QnlDLFNBNUI3QixTQUFrQnZDLEdBQ2R6QixFQUFHbUQsYUFBYTVCLEVBQU1FLEdBQVFBLEVBQ2xDLEVBMEJ1Q3dDLGVBeEJ2QyxXQUNJakUsRUFBR21CLGdCQUNIbkIsRUFBR2tELFNBQVMzQixFQUNoQixFQXFCdURnRCxhQWxCdkQsU0FBc0I5QyxFQUFPOEQsRUFBVUMsRUFBZ0JDLEVBQVlDLEVBQWFDLEdBQzVFcEUsRUFBTUUsR0FBTzZELFdBQVdDLEVBQVVDLEVBQWdCQyxFQUFZQyxFQUFhQyxHQUMzRTNGLEVBQUdtQixnQkFDSG5CLEVBQUdrRCxTQUFTM0IsR0FDWmlELEVBQWtCakQsRUFFdEIsRUFjSCxFQXpGa0IsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZldlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9VSS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVGhpc1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1RvZGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9iaW5kRXZlbnQuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNzdHJpbmctYXJndW1lbnRzXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIGRheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZkRheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mRGF5IGZyb20gXCIuLi9zdGFydE9mRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgMDY6MDA6MDAgYW5kIDQgU2VwdGVtYmVyIDE4OjAwOjAwIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNCwgOSwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciwgMjAxNCBhbmQgNCBTZXB0ZW1iZXIsIDIwMTUgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJ2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIGRlZmF1bHRPcHRpb25zO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuLi9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHZhciBfcmVmLCBfcmVmMiwgX3JlZjMsIF9vcHRpb25zJHdlZWtTdGFydHNPbiwgX29wdGlvbnMkbG9jYWxlLCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8sIF9kZWZhdWx0T3B0aW9ucyRsb2NhbCwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMjtcblxuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgdmFyIHdlZWtTdGFydHNPbiA9IHRvSW50ZWdlcigoX3JlZiA9IChfcmVmMiA9IChfcmVmMyA9IChfb3B0aW9ucyR3ZWVrU3RhcnRzT24gPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gIT09IHZvaWQgMCA/IF9vcHRpb25zJHdlZWtTdGFydHNPbiA6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPSBfb3B0aW9ucyRsb2NhbGUub3B0aW9ucykgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlJG9wdGlvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRsb2NhbGUkb3B0aW8ud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMyAhPT0gdm9pZCAwID8gX3JlZjMgOiBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYyICE9PSB2b2lkIDAgPyBfcmVmMiA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPSBkZWZhdWx0T3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPSBfZGVmYXVsdE9wdGlvbnMkbG9jYWwub3B0aW9ucykgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlZmF1bHRPcHRpb25zJGxvY2FsMi53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYgIT09IHZvaWQgMCA/IF9yZWYgOiAwKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZXZWVrIGZyb20gXCIuLi9zdGFydE9mV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1NhbWVXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcik/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcik/XG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcilcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgd2VlayBzdGFydHMgd2l0aCBNb25kYXksXG4gKiAvLyBhcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSwge1xuICogICB3ZWVrU3RhcnRzT246IDFcbiAqIH0pXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAxIEphbnVhcnkgMjAxNCBhbmQgMSBKYW51YXJ5IDIwMTUgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgMCwgMSksIG5ldyBEYXRlKDIwMTUsIDAsIDEpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVXZWVrKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0LCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZUxlZnQsIG9wdGlvbnMpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVSaWdodCwgb3B0aW9ucyk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZXZWVrLmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZldlZWsuZ2V0VGltZSgpO1xufSIsImltcG9ydCB7IGFwcCB9IGZyb20gJy4vaW5kZXguanMnXG5pbXBvcnQgaXNUb2RheSBmcm9tICdkYXRlLWZucy9pc1RvZGF5J1xuaW1wb3J0IGlzVGhpc1dlZWsgZnJvbSAnZGF0ZS1mbnMvaXNUaGlzV2VlaydcblxuXG5cbmNvbnN0IFVJID0gKCgpID0+IHtcbiAgICBcbiAgICAvLyBjYWNoZSBkb21cbiAgICBjb25zdCBuZXdUb2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3VG9kb0Zvcm1cIilcbiAgICBjb25zdCB0b2Rvc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb3MtY29udGFpbmVyXCIpO1xuICAgIGNvbnN0IGVkaXRUb2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0VG9kb0NvbnRhaW5lclwiKVxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbnRlbnRcIik7XG5cbiAgICBjb25zdCBuYXZQcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2UHJvamVjdHNcIik7XG4gICAgY29uc3QgbmF2SG9tZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2SG9tZVwiKTtcbiAgICBjb25zdCBuYXZUb2RheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2VG9kYXlcIik7XG4gICAgY29uc3QgbmF2V2VlayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2V2Vla1wiKTtcblxuXG4gICAgZnVuY3Rpb24gb3Blbk5ld1RvZG9Gb3JtKCkge1xuICAgICAgICBuZXdUb2RvRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiaW5hY3RpdmVcIik7XG4gICAgICAgIGVkaXRUb2RvQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIHRvZG9zQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VOZXdUb2RvRm9ybSgpIHtcbiAgICAgICAgLy8gY2xlYXIgaW5wdXQgZmllbGRzIGFmdGVyIGNsb3NpbmdcbiAgICAgICAgbmV3VG9kb0Zvcm0uY2hpbGROb2Rlcy5mb3JFYWNoKChlbGUpID0+IHtcbiAgICAgICAgICAgIGlmKGVsZS50eXBlICE9PSBcInRleHRcIikgcmV0dXJuO1xuICAgICAgICAgICAgZWxlLnZhbHVlID0gXCJcIjtcbiAgICAgICAgfSlcbiAgICAgICAgbmV3VG9kb0Zvcm0uY2xhc3NMaXN0LmFkZChcImluYWN0aXZlXCIpOyBcbiAgICAgICAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEhvbWUodG9kb3MpIHtcbiAgICAgICAgbmF2SG9tZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2VG9kYXkuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgICAgIG5hdldlZWsuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgICAgIG5hdlByb2plY3RzLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKVxuICAgICAgICBjbGVhclNjcmVlbigpO1xuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICB0b2Rvcy5mb3JFYWNoKHRvZG8gPT4ge1xuICAgICAgICAgICAgdG9kb3NDb250YWluZXIuaW5uZXJIVE1MICs9XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9kb1wiIGRhdGEtaWQ9XCIke2luZGV4fVwiPlxuICAgICAgICAgICAgICAgIDxwPiR7dG9kby50aXRsZX08L3A+XG4gICAgICAgICAgICAgICAgPHA+RHVlOiAke3RvZG8uZHVlRGF0ZX08L3A+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIkVkaXRcIiBjbGFzcz1cImVkaXRUb2RvQnRuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJEZWxldGVcIiBjbGFzcz1cImRlbGV0ZVRvZG9CdG5cIj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYFxuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFRvZGF5KHRvZG9zKSB7XG4gICAgICAgIG5hdlRvZGF5LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZIb21lLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZXZWVrLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZQcm9qZWN0cy5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgY2xlYXJTY3JlZW4oKTtcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgbGV0IHRvZGF5VG9kb3MgPSB0b2Rvcy5maWx0ZXIoKHRvZG8pID0+IHtcbiAgICAgICAgICAgIGlmKGlzVG9kYXkoRGF0ZS5wYXJzZSh0b2RvLmR1ZURhdGUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2RvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICB0b2RheVRvZG9zLmZvckVhY2godG9kbyA9PiB7XG4gICAgICAgICAgICB0b2Rvc0NvbnRhaW5lci5pbm5lckhUTUwgKz1cbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2RvXCIgZGF0YS1pZD1cIiR7aW5kZXh9XCI+XG4gICAgICAgICAgICAgICAgPHA+JHt0b2RvLnRpdGxlfTwvcD5cbiAgICAgICAgICAgICAgICA8cD5EdWU6ICR7dG9kby5kdWVEYXRlfTwvcD5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiRWRpdFwiIGNsYXNzPVwiZWRpdFRvZG9CdG5cIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIkRlbGV0ZVwiIGNsYXNzPVwiZGVsZXRlVG9kb0J0blwiPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRXZWVrKHRvZG9zKSB7XG4gICAgICAgIG5hdldlZWsuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpXG4gICAgICAgIG5hdlRvZGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZIb21lLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZQcm9qZWN0cy5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgY2xlYXJTY3JlZW4oKTtcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgbGV0IHdlZWtUb2RvcyA9IHRvZG9zLmZpbHRlcigodG9kbykgPT4ge1xuICAgICAgICAgICAgaWYoaXNUaGlzV2VlayhEYXRlLnBhcnNlKHRvZG8uZHVlRGF0ZSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvZG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHdlZWtUb2Rvcy5mb3JFYWNoKHRvZG8gPT4ge1xuICAgICAgICAgICAgdG9kb3NDb250YWluZXIuaW5uZXJIVE1MICs9XG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9kb1wiIGRhdGEtaWQ9XCIke2luZGV4fVwiPlxuICAgICAgICAgICAgICAgIDxwPiR7dG9kby50aXRsZX08L3A+XG4gICAgICAgICAgICAgICAgPHA+RHVlOiAke3RvZG8uZHVlRGF0ZX08L3A+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIkVkaXRcIiBjbGFzcz1cImVkaXRUb2RvQnRuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJEZWxldGVcIiBjbGFzcz1cImRlbGV0ZVRvZG9CdG5cIj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYFxuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfSk7XG5cbiAgICB9ICAgICBcblxuICAgIGZ1bmN0aW9uIGhpZGVUb2RvcygpIHtcbiAgICAgICAgdG9kb3NDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvcGVuRWRpdFRvZG8odG9kbywgaW5kZXgpIHtcbiAgICAgICAgdG9kb3NDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgY2xvc2VOZXdUb2RvRm9ybSgpO1xuICAgICAgICBlZGl0VG9kb0NvbnRhaW5lci5pbm5lckhUTUwgPSBcbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlZGl0VG9kb1wiIGRhdGEtaWQ9XCIke2luZGV4fVwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJHt0b2RvLnRpdGxlfVwiIGNsYXNzPVwiZWRpdFRpdGxlSW5wdXRcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIiR7dG9kby5kZXNjcmlwdGlvbn1cIiBjbGFzcz1cImVkaXREZXNjcmlwdGlvbklucHV0XCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgdmFsdWU9XCIke3RvZG8uZHVlRGF0ZX1cIiBjbGFzcz1cImVkaXREdWVEYXRlSW5wdXRcIj4gXG4gICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVwicHJpb3JpdHlcIiBpZD1cInByaW9yaXR5XCIgY2xhc3M9XCJlZGl0UHJpb3JpdHlJbnB1dFwiPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICR7KHRvZG8ucHJpb3JpdHkgPT0gXCJsb3dcIikgPyBcInNlbGVjdGVkXCIgOiBcIlwifSB2YWx1ZT1cImxvd1wiPkxvdzwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICR7KHRvZG8ucHJpb3JpdHkgPT0gXCJtaWRcIikgPyBcInNlbGVjdGVkXCIgOiBcIlwifSB2YWx1ZT1cIm1pZFwiPk1pZDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uICR7KHRvZG8ucHJpb3JpdHkgPT0gXCJoaWdoXCIpID8gXCJzZWxlY3RlZFwiIDogXCJcIn0gdmFsdWU9XCJoaWdoXCI+SGlnaDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJHt0b2RvLnByb2plY3R9XCIgY2xhc3M9XCJlZGl0UHJvamVjdElucHV0XCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIlNhdmVcIiBjbGFzcz1cInNhdmVFZGl0QnRuXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIkNhbmNlbFwiIGNsYXNzPVwiY2FuY2VsRWRpdEJ0blwiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VFZGl0VG9kbygpIHtcbiAgICAgICAgZWRpdFRvZG9Db250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkUHJvamVjdHNQYWdlKHRvZG9zKSB7XG4gICAgICAgIG5hdlByb2plY3RzLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKVxuICAgICAgICBuYXZUb2RheS5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2SG9tZS5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgbmF2V2Vlay5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICAgICAgY2xlYXJTY3JlZW4oKTsgICBcbiAgICAgICAgbGV0IHRvZG9zV2l0aFNhbWVQcm9qZWN0O1xuXG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lcyA9IHRvZG9zLm1hcCgodG9kbykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRvZG8ucHJvamVjdDtcbiAgICAgICAgfSlcblxuICAgICAgICBsZXQgdW5pcVByb2pldHMgPSBbLi4ubmV3IFNldChwcm9qZWN0TmFtZXMpXTtcblxuICAgICAgICB1bmlxUHJvamV0cy5mb3JFYWNoKHByb2plY3QgPT4ge1xuICAgICAgICAgICAgbGV0IHRvZG9zV2l0aFNhbWVQcm9qZWN0ID0gdG9kb3MuZmlsdGVyKHRvZG8gPT4ge1xuICAgICAgICAgICAgICAgIGlmKHRvZG8ucHJvamVjdCA9PT0gcHJvamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9kb1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwicHJvamVjdENvbnRhaW5lclwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3Q7XG4gICAgICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RUaXRsZSlcblxuICAgICAgICAgICAgdG9kb3NXaXRoU2FtZVByb2plY3QuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9qZWN0VG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0VG9kby50ZXh0Q29udGVudCA9IHRvZG8udGl0bGU7XG4gICAgICAgICAgICAgICAgcHJvamVjdFRvZG8uY2xhc3NMaXN0LmFkZChcInByb2plY3RUb2Rvc1wiKVxuICAgICAgICAgICAgICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdFRvZG8pXG4gICAgICAgICAgICB9KSBcblxuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChwcm9qZWN0Q29udGFpbmVyKVxuICAgICAgICB9KVxuXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBjbGVhclNjcmVlbigpIHtcbiAgICAgICAgY2xvc2VOZXdUb2RvRm9ybSgpO1xuICAgICAgICBjbG9zZUVkaXRUb2RvKCk7XG4gICAgICAgIGhpZGVUb2RvcygpO1xuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IFwiXCI7XG4gICAgfVxuXG5cbiAgICByZXR1cm4geyBsb2FkV2VlaywgbG9hZFRvZGF5LCBsb2FkUHJvamVjdHNQYWdlLCBjbGVhclNjcmVlbiwgb3Blbk5ld1RvZG9Gb3JtLCBjbG9zZU5ld1RvZG9Gb3JtLCBsb2FkSG9tZSwgb3BlbkVkaXRUb2RvLCBjbG9zZUVkaXRUb2RvIH1cbn0pKCk7XG5cbmV4cG9ydCB7IFVJIH0iLCJpbXBvcnQgaXNTYW1lV2VlayBmcm9tIFwiLi4vaXNTYW1lV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1RoaXNXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9uc1xuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIGluIHRoaXMgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0LCBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCBhbmQgd2VlayBzdGFydHMgd2l0aCBNb25kYXlcbiAqIC8vIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RoaXNXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIGlzU2FtZVdlZWsoZGlydHlEYXRlLCBEYXRlLm5vdygpLCBvcHRpb25zKTtcbn0iLCJpbXBvcnQgaXNTYW1lRGF5IGZyb20gXCIuLi9pc1NhbWVEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHRvZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDYgT2N0b2JlciAxNDowMDowMCB0b2RheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVG9kYXkobmV3IERhdGUoMjAxNCwgOSwgNiwgMTQsIDApKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUb2RheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVEYXkoZGlydHlEYXRlLCBEYXRlLm5vdygpKTtcbn0iLCJpbXBvcnQgeyBhcHAgfSBmcm9tICcuL2luZGV4LmpzJ1xuaW1wb3J0IHsgVUkgfSBmcm9tICcuL1VJLmpzJztcblxuZXhwb3J0IGNvbnN0IGJpbmRFdmVudCA9ICgoKSA9PiB7XG4gICAgZnVuY3Rpb24gbmV3VG9kb0Zvcm0oZSkge1xuICAgICAgICBjb25zdCBldmVudENsYXNzID0gZS50YXJnZXQuY2xhc3NMaXN0WzBdO1xuICAgICAgICAvLyBhZGQgbmV3IGJvb2sgYnV0dG9uXG4gICAgICAgIGlmKGV2ZW50Q2xhc3MgPT09IFwiYWRkQm9va0J0blwiKSB7XG4gICAgICAgICAgICBhcHAuYWRkVG9kbygpO1xuICAgICAgICAvLyBjYW5jZWwgYnV0dG9uXG4gICAgICAgIH0gZWxzZSBpZihldmVudENsYXNzID09PSBcImNsb3NlVG9kb0Zvcm1cIikge1xuICAgICAgICAgICAgVUkuY2xvc2VOZXdUb2RvRm9ybSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9kbyhlKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50Q2xhc3MgPSBlLnRhcmdldC5jbGFzc0xpc3RbMF07XG4gICAgICAgIGxldCBpbmRleCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LmlkO1xuXG4gICAgICAgIGlmKGV2ZW50Q2xhc3MgPT09IFwiZGVsZXRlVG9kb0J0blwiKSB7XG4gICAgICAgICAgICBhcHAuZGVsZXRlVG9kbyhpbmRleClcbiAgICAgICAgfSBlbHNlIGlmKGV2ZW50Q2xhc3MgPT09IFwiZWRpdFRvZG9CdG5cIikge1xuICAgICAgICAgICAgYXBwLmVkaXRUb2RvKGluZGV4KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWRpdFRvZG8oZSkge1xuICAgICAgICBsZXQgaW5kZXggPSBlLnRhcmdldC5wYXJlbnROb2RlLmRhdGFzZXQuaWQ7XG4gICAgICAgIGNvbnN0IGV2ZW50Q2xhc3MgPSBlLnRhcmdldC5jbGFzc0xpc3RbMF07XG4gICAgICAgIGlmKGV2ZW50Q2xhc3MgPT09IFwiY2FuY2VsRWRpdEJ0blwiKSB7XG4gICAgICAgICAgIGFwcC5jYW5jZWxFZGl0VG9kbygpO1xuICAgICAgICB9IGVsc2UgaWYoZXZlbnRDbGFzcyA9PT0gXCJzYXZlRWRpdEJ0blwiKSB7XG4gICAgICAgICAgIGNvbnN0IGVkaXRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0VGl0bGVJbnB1dFwiKS52YWx1ZTtcbiAgICAgICAgICAgY29uc3QgZWRpdERlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXREZXNjcmlwdGlvbklucHV0XCIpLnZhbHVlO1xuICAgICAgICAgICBjb25zdCBlZGl0RHVlRGF0ZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0RHVlRGF0ZUlucHV0XCIpLnZhbHVlO1xuICAgICAgICAgICBjb25zdCBlZGl0UHJpb3JpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdFByaW9yaXR5SW5wdXRcIikudmFsdWU7XG4gICAgICAgICAgIGNvbnN0IGVkaXRQcm9qZWN0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXRQcm9qZWN0SW5wdXRcIikudmFsdWU7XG4gICAgICAgICAgIGFwcC5zYXZlRWRpdFRvZG8oaW5kZXgsIGVkaXRUaXRsZUlucHV0LCBlZGl0RGVzY3JpcHRpb25JbnB1dCwgZWRpdER1ZURhdGVJbnB1dCwgZWRpdFByaW9yaXR5SW5wdXQsIGVkaXRQcm9qZWN0SW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgbmV3VG9kb0Zvcm0sIHRvZG8sIGVkaXRUb2RvIH1cbn0pKCk7IiwiaW1wb3J0IHsgVG9kbyB9IGZyb20gJy4vaW5kZXgnXG5cbmV4cG9ydCBjb25zdCBzdG9yYWdlID0gKCgpID0+IHtcblxuICAgIGZ1bmN0aW9uIHNhdmVUb2Rvcyh0b2Rvcykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvZG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvZG9zKSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkVG9kb3MoKSB7XG4gICAgICAgIGxldCByZXMgPSBbXTtcbiAgICAgICAgbGV0IGxvYWRlZFRvZG9zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvZG9zXCIpKTtcbiAgICAgICAgaWYobG9hZFRvZG9zLmxlbmd0aCA9PSAwKSByZXR1cm4gcmVzO1xuICAgICAgICBsb2FkZWRUb2Rvcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgbGV0IG5ld1RvZG8gPSBuZXcgVG9kbyhlbGVtZW50LnRpdGxlLCBlbGVtZW50LmRlc2NyaXB0aW9uLCBlbGVtZW50LmR1ZURhdGUsIGVsZW1lbnQucHJpb3JpdHksIGVsZW1lbnQucHJvamVjdCk7XG4gICAgICAgICAgICByZXMucHVzaChuZXdUb2RvKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICByZXR1cm4geyBzYXZlVG9kb3MsIGxvYWRUb2RvcyB9XG59KSgpOyIsImltcG9ydCB7IFVJIH0gZnJvbSAnLi9VSS5qcyc7XG5pbXBvcnQgeyBiaW5kRXZlbnQgfSBmcm9tICcuL2JpbmRFdmVudCc7XG5pbXBvcnQgeyBzdG9yYWdlIH0gZnJvbSAnLi9zdG9yYWdlJztcblxuXG5leHBvcnQgZnVuY3Rpb24gVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0OyBcbn0gICAgXG5cblRvZG8ucHJvdG90eXBlLnVwZGF0ZVRvZG8gPSBmdW5jdGlvbihuZXdUaXRsZSwgbmV3RGVzY3JpcHRpb24sIG5ld0R1ZURhdGUsIG5ld1ByaW9yaXR5LCBuZXdQcm9qZWN0KSB7XG4gICAgdGhpcy50aXRsZSA9IG5ld1RpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcbiAgICB0aGlzLmR1ZURhdGUgPSBuZXdEdWVEYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBuZXdQcmlvcml0eTtcbiAgICB0aGlzLnByb2plY3QgPSBuZXdQcm9qZWN0O1xufVxuXG5cbmV4cG9ydCBjb25zdCBhcHAgPSAoKCkgPT4ge1xuXG4gICAgLy8gc3RvcmVzIGV2ZXJ5IHRvZG9cbiAgICBsZXQgdG9kb3MgPSBbXTsgICAgXG4gICAgXG4gICAgLy8gY2FjaGUgZG9tXG4gICAgY29uc3QgbmV3Qm9va0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3Qm9va0J0blwiKTtcbiAgICBjb25zdCBuZXdUb2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3VG9kb0Zvcm1cIik7XG4gICAgY29uc3QgdG9kb3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9zLWNvbnRhaW5lclwiKTtcbiAgICBjb25zdCBlZGl0VG9kb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdFRvZG9Db250YWluZXJcIilcblxuICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpXG4gICAgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIilcbiAgICBjb25zdCBkdWVkYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2R1ZWRhdGVcIilcbiAgICBjb25zdCBwcmlvcml0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmlvcml0eVwiKVxuICAgIGNvbnN0IHByb2plY3RJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdFwiKVxuXG4gICAgY29uc3QgbmF2UHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlByb2plY3RzXCIpO1xuICAgIGNvbnN0IG5hdkhvbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdkhvbWVcIik7XG4gICAgY29uc3QgbmF2VG9kYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdlRvZGF5XCIpO1xuICAgIGNvbnN0IG5hdldlZWsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdldlZWtcIik7XG5cbiAgICAvLyBhZGQgZXZlbnRzXG4gICAgbmV3Qm9va0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgVUkub3Blbk5ld1RvZG9Gb3JtIClcbiAgICBuZXdUb2RvRm9ybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYmluZEV2ZW50Lm5ld1RvZG9Gb3JtKVxuICAgIHRvZG9zQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBiaW5kRXZlbnQudG9kbylcbiAgICBlZGl0VG9kb0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYmluZEV2ZW50LmVkaXRUb2RvKVxuICAgIG5hdlByb2plY3RzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIFVJLmxvYWRQcm9qZWN0c1BhZ2UodG9kb3MpO1xuICAgIH0pXG4gICAgbmF2SG9tZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBVSS5sb2FkSG9tZSh0b2Rvcyk7XG4gICAgfSk7XG4gICAgbmF2VG9kYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICAoKSA9PiB7XG4gICAgICAgIFVJLmxvYWRUb2RheSh0b2RvcylcbiAgICB9KVxuICAgIG5hdldlZWsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgVUkubG9hZFdlZWsodG9kb3MpXG4gICAgfSlcblxuXG4gICAgLy8gZnVuY3Rpb25zXG4gICAgZnVuY3Rpb24gYWRkVG9kbygpIHtcbiAgICAgICAgaWYoIXRpdGxlSW5wdXQudmFsdWUpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiWW91IGhhdmUgdG8gZmlsbCBpbiBhIHRpdGxlIVwiKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1RvZG8gPSBuZXcgVG9kbyh0aXRsZUlucHV0LnZhbHVlLCBkZXNjcmlwdGlvbklucHV0LnZhbHVlLCBkdWVkYXRlSW5wdXQudmFsdWUsIHByaW9yaXR5SW5wdXQudmFsdWUsIHByb2plY3RJbnB1dC52YWx1ZSk7XG4gICAgICAgIHRvZG9zLnB1c2gobmV3VG9kbylcbiAgICAgICAgc3RvcmFnZS5zYXZlVG9kb3ModG9kb3MpXG4gICAgICAgIFVJLmxvYWRIb21lKHRvZG9zKVxuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBkZWxldGVUb2RvKGluZGV4KSB7XG4gICAgICAgIHRvZG9zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIFVJLmxvYWRIb21lKHRvZG9zKTtcbiAgICAgICAgc3RvcmFnZS5zYXZlVG9kb3ModG9kb3MpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRUb2RvKGluZGV4KSB7XG4gICAgICAgIFVJLm9wZW5FZGl0VG9kbyh0b2Rvc1tpbmRleF0sIGluZGV4KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbmNlbEVkaXRUb2RvKCkge1xuICAgICAgICBVSS5jbG9zZUVkaXRUb2RvKCk7XG4gICAgICAgIFVJLmxvYWRIb21lKHRvZG9zKTtcbiAgICB9XG4gXG4gICAgXG4gICAgZnVuY3Rpb24gc2F2ZUVkaXRUb2RvKGluZGV4LCBuZXdUaXRsZSwgbmV3RGVzY3JpcHRpb24sIG5ld0R1ZURhdGUsIG5ld1ByaW9yaXR5LCBuZXdQcm9qZWN0KSB7XG4gICAgICAgIHRvZG9zW2luZGV4XS51cGRhdGVUb2RvKG5ld1RpdGxlLCBuZXdEZXNjcmlwdGlvbiwgbmV3RHVlRGF0ZSwgbmV3UHJpb3JpdHksIG5ld1Byb2plY3QpO1xuICAgICAgICBVSS5jbG9zZUVkaXRUb2RvKCk7XG4gICAgICAgIFVJLmxvYWRIb21lKHRvZG9zKTtcbiAgICAgICAgc3RvcmFnZS5zYXZlVG9kb3ModG9kb3MpXG5cbiAgICB9XG4gIFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHRvZG9zID0gc3RvcmFnZS5sb2FkVG9kb3MoKTtcbiAgICAgICAgVUkubG9hZEhvbWUodG9kb3MpXG4gICAgfVxuXG5cblxuICAgIGluaXQoKTtcblxuXG4gICAgcmV0dXJuIHthZGRUb2RvLCBkZWxldGVUb2RvLCBlZGl0VG9kbywgY2FuY2VsRWRpdFRvZG8sIHNhdmVFZGl0VG9kb31cblxufSkoKTtcblxuXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ3VtZW50cyIsImFyZ1N0ciIsInRvU3RyaW5nIiwiRGF0ZSIsImdldFRpbWUiLCJjb25zb2xlIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJOYU4iLCJzdGFydE9mRGF5IiwiZGlydHlEYXRlIiwiZGF0ZSIsInNldEhvdXJzIiwiaXNTYW1lRGF5IiwiZGlydHlEYXRlTGVmdCIsImRpcnR5RGF0ZVJpZ2h0IiwiZGF0ZUxlZnRTdGFydE9mRGF5IiwiZGF0ZVJpZ2h0U3RhcnRPZkRheSIsInRvSW50ZWdlciIsImRpcnR5TnVtYmVyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJNYXRoIiwiY2VpbCIsImZsb29yIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsInN0YXJ0T2ZXZWVrIiwib3B0aW9ucyIsIl9yZWYiLCJfcmVmMiIsIl9yZWYzIiwiX29wdGlvbnMkd2Vla1N0YXJ0c09uIiwiX29wdGlvbnMkbG9jYWxlIiwiX29wdGlvbnMkbG9jYWxlJG9wdGlvIiwiX2RlZmF1bHRPcHRpb25zJGxvY2FsIiwiX2RlZmF1bHRPcHRpb25zJGxvY2FsMiIsIndlZWtTdGFydHNPbiIsImxvY2FsZSIsIlJhbmdlRXJyb3IiLCJkYXkiLCJnZXREYXkiLCJkaWZmIiwic2V0RGF0ZSIsImdldERhdGUiLCJpc1NhbWVXZWVrIiwiZGF0ZUxlZnRTdGFydE9mV2VlayIsImRhdGVSaWdodFN0YXJ0T2ZXZWVrIiwiVUkiLCJuZXdUb2RvRm9ybSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRvZG9zQ29udGFpbmVyIiwiZWRpdFRvZG9Db250YWluZXIiLCJjb250ZW50IiwibmF2UHJvamVjdHMiLCJuYXZIb21lIiwibmF2VG9kYXkiLCJuYXZXZWVrIiwiY2xvc2VOZXdUb2RvRm9ybSIsImNoaWxkTm9kZXMiLCJmb3JFYWNoIiwiZWxlIiwidHlwZSIsInZhbHVlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvc2VFZGl0VG9kbyIsImlubmVySFRNTCIsImNsZWFyU2NyZWVuIiwibG9hZFdlZWsiLCJ0b2RvcyIsInJlbW92ZSIsImluZGV4Iiwid2Vla1RvZG9zIiwiZmlsdGVyIiwidG9kbyIsIm5vdyIsImlzVGhpc1dlZWsiLCJwYXJzZSIsImR1ZURhdGUiLCJ0aXRsZSIsImxvYWRUb2RheSIsInRvZGF5VG9kb3MiLCJpc1RvZGF5IiwibG9hZFByb2plY3RzUGFnZSIsInByb2plY3ROYW1lcyIsIm1hcCIsInByb2plY3QiLCJTZXQiLCJ0b2Rvc1dpdGhTYW1lUHJvamVjdCIsInByb2plY3RDb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwicHJvamVjdFRpdGxlIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInByb2plY3RUb2RvIiwib3Blbk5ld1RvZG9Gb3JtIiwibG9hZEhvbWUiLCJvcGVuRWRpdFRvZG8iLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwiYmluZEV2ZW50IiwiZSIsImV2ZW50Q2xhc3MiLCJ0YXJnZXQiLCJhcHAiLCJhZGRUb2RvIiwicGFyZW50Tm9kZSIsImRhdGFzZXQiLCJpZCIsImRlbGV0ZVRvZG8iLCJlZGl0VG9kbyIsImNhbmNlbEVkaXRUb2RvIiwiZWRpdFRpdGxlSW5wdXQiLCJlZGl0RGVzY3JpcHRpb25JbnB1dCIsImVkaXREdWVEYXRlSW5wdXQiLCJlZGl0UHJpb3JpdHlJbnB1dCIsImVkaXRQcm9qZWN0SW5wdXQiLCJzYXZlRWRpdFRvZG8iLCJzdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2FkVG9kb3MiLCJyZXMiLCJsb2FkZWRUb2RvcyIsImdldEl0ZW0iLCJlbGVtZW50IiwibmV3VG9kbyIsIlRvZG8iLCJwdXNoIiwidGhpcyIsInVwZGF0ZVRvZG8iLCJuZXdUaXRsZSIsIm5ld0Rlc2NyaXB0aW9uIiwibmV3RHVlRGF0ZSIsIm5ld1ByaW9yaXR5IiwibmV3UHJvamVjdCIsIm5ld0Jvb2tCdG4iLCJ0aXRsZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsImR1ZWRhdGVJbnB1dCIsInByaW9yaXR5SW5wdXQiLCJwcm9qZWN0SW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiYWxlcnQiLCJzcGxpY2UiXSwic291cmNlUm9vdCI6IiJ9